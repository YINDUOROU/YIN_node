<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title></title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.page-description {
	margin-bottom: 2em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(50, 48, 44, 1);
}
.highlight-gray {
	color: rgba(115, 114, 110, 1);
	fill: rgba(115, 114, 110, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(205, 60, 58, 1);
	fill: rgba(205, 60, 58, 1);
}
.highlight-default_background {
	color: rgba(50, 48, 44, 1);
}
.highlight-gray_background {
	background: rgba(248, 248, 247, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(248, 243, 252, 1);
}
.highlight-pink_background {
	background: rgba(252, 241, 246, 1);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(115, 114, 110, 1);
	fill: rgba(115, 114, 110, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(205, 60, 58, 1);
	fill: rgba(205, 60, 58, 1);
}
.block-color-default_background {
	color: inherit;
	fill: inherit;
}
.block-color-gray_background {
	background: rgba(248, 248, 247, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(248, 243, 252, 1);
}
.block-color-pink_background {
	background: rgba(252, 241, 246, 1);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-uiBlue { background-color: undefined; }
.select-value-color-pink { background-color: rgba(225, 136, 179, 0.27); }
.select-value-color-purple { background-color: rgba(168, 129, 197, 0.27); }
.select-value-color-green { background-color: rgba(123, 183, 129, 0.27); }
.select-value-color-gray { background-color: rgba(84, 72, 49, 0.15); }
.select-value-color-translucentGray { background-color: undefined; }
.select-value-color-orange { background-color: rgba(224, 124, 57, 0.27); }
.select-value-color-brown { background-color: rgba(210, 162, 141, 0.35); }
.select-value-color-red { background-color: rgba(244, 171, 159, 0.4); }
.select-value-color-yellow { background-color: rgba(236, 191, 66, 0.39); }
.select-value-color-blue { background-color: rgba(93, 165, 206, 0.27); }
.select-value-color-pageGlass { background-color: undefined; }
.select-value-color-washGlass { background-color: undefined; }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="2078d968-54a6-80b1-9cd5-f1e171870efc" class="page sans"><header><h1 class="page-title">Spring &amp; Spring Bootç¬”è®°2</h1><p class="page-description"></p></header><div class="page-body"><h1 id="s7" class="">ç¬¬7ç« ï¼šå‚æ•°æ ¡éªŒä¸å…¨å±€å¼‚å¸¸å¤„ç†æœºåˆ¶</h1><blockquote id="2078d968-54a6-8074-8535-d34a2aa321ec" class="">âœ… æœ¬ç« ç›®æ ‡ï¼š<ul id="2078d968-54a6-80a6-b993-dee241cca77c" class="bulleted-list"><li style="list-style-type:disc">å®ç°åç«¯å‚æ•°æ ¡éªŒï¼ˆæ ¡éªŒè¯·æ±‚ä½“çš„å­—æ®µæ˜¯å¦åˆæ³•ï¼‰</li></ul><ul id="2078d968-54a6-8022-8169-c98b411f137e" class="bulleted-list"><li style="list-style-type:disc">å­¦ä¼šä½¿ç”¨ <code>@Valid</code> ä¸ Bean Validation æ³¨è§£</li></ul><ul id="2078d968-54a6-80ce-8a82-e2d93bc67529" class="bulleted-list"><li style="list-style-type:disc">ç»Ÿä¸€å¤„ç†æ¥å£æŠ›å‡ºçš„å¼‚å¸¸ï¼ˆé˜²æ­¢é”™è¯¯ä¿¡æ¯æ³„æ¼ï¼‰</li></ul><ul id="2078d968-54a6-80a2-8518-d9a8bf0cf8d7" class="bulleted-list"><li style="list-style-type:disc">ğŸŒŸ æ‹“å±•ï¼šç³»ç»Ÿè®¾è®¡ä¸­å¦‚ä½•ä¼˜é›…åœ°å¤„ç†é”™è¯¯ + é¢è¯•å¸¸é—®å†…å®¹</li></ul><ul id="2078d968-54a6-80ee-af66-d606e2b8347b" class="bulleted-list"><li style="list-style-type:disc">ğŸ“Œ æ‰€æœ‰ä»£ç å‡åŠ æ³¨é‡Šï¼ŒåŠ©ä½ è½»æ¾ç†è§£</li></ul></blockquote><hr id="2078d968-54a6-8047-b5d0-dde880dc3230"/><h2 id="2078d968-54a6-80b1-a11f-f7934e6867b2" class="">1. ä¸ºä»€ä¹ˆéœ€è¦å‚æ•°æ ¡éªŒä¸å¼‚å¸¸å¤„ç†ï¼Ÿ</h2><h3 id="2078d968-54a6-802e-84eb-d0f1018a9cbb" class="">âœ… å‚æ•°æ ¡éªŒçš„ä½œç”¨ï¼š</h3><ul id="2078d968-54a6-805a-ab1d-d5a9c52b8135" class="bulleted-list"><li style="list-style-type:disc">é˜²æ­¢ç”¨æˆ·è¾“å…¥éæ³•æ•°æ®ï¼ˆç©ºå­—æ®µã€æ ¼å¼é”™è¯¯ï¼‰</li></ul><ul id="2078d968-54a6-80ad-b691-e9ea6f25c7c1" class="bulleted-list"><li style="list-style-type:disc">åç«¯æå‰è¿‡æ»¤æ— æ•ˆè¯·æ±‚</li></ul><ul id="2078d968-54a6-8049-9885-e4ccbc703934" class="bulleted-list"><li style="list-style-type:disc">æé«˜æ•°æ®å®‰å…¨æ€§ä¸ä»£ç é²æ£’æ€§</li></ul><h3 id="2078d968-54a6-80de-857f-c7396fb92e2f" class="">âœ… å¼‚å¸¸å¤„ç†çš„ä½œç”¨ï¼š</h3><ul id="2078d968-54a6-808d-b92b-eee0985d0034" class="bulleted-list"><li style="list-style-type:disc">é˜²æ­¢ç³»ç»Ÿé”™è¯¯ä¿¡æ¯æ³„éœ²ï¼ˆå¦‚æ•°æ®åº“å¼‚å¸¸ã€ç©ºæŒ‡é’ˆç­‰ï¼‰</li></ul><ul id="2078d968-54a6-806f-9d21-e7509af56b53" class="bulleted-list"><li style="list-style-type:disc">æä¾›ç»Ÿä¸€çš„é”™è¯¯è¿”å›ç»“æ„ï¼Œä¾¿äºå‰ç«¯å¤„ç†</li></ul><ul id="2078d968-54a6-8068-ab23-fe465e8027fc" class="bulleted-list"><li style="list-style-type:disc">é›†ä¸­ç®¡ç†é”™è¯¯é€»è¾‘ï¼Œæå‡å¯ç»´æŠ¤æ€§</li></ul><hr id="2078d968-54a6-8061-baa5-f2f3c59de8c0"/><h2 id="2078d968-54a6-80c4-881c-c47884abb2e8" class="">2. å¼€å¯å‚æ•°æ ¡éªŒåŠŸèƒ½ï¼ˆä½¿ç”¨ <code>javax.validation</code>ï¼‰</h2><hr id="2078d968-54a6-80f6-b9a1-f089a7d2cd84"/><h3 id="2078d968-54a6-807b-986e-f027302cb4e9" class="">âœ… æ­¥éª¤ä¸€ï¼šæ·»åŠ ä¾èµ–ï¼ˆå¦‚æœæ²¡æœ‰ï¼‰</h3><p id="2078d968-54a6-801f-96b6-f6d83f66570f" class="">Spring Boot Web é¡¹ç›®é€šå¸¸å·²è‡ªåŠ¨å¼•å…¥æ­¤ä¾èµ–ï¼Œä½†å»ºè®®æ£€æŸ¥ï¼š</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-805c-af13-d8b2ba5a04c2" class="code"><code class="language-XML" style="white-space:pre-wrap;word-break:break-all">xml

&lt;dependency&gt;
  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
  &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;
&lt;/dependency&gt;

</code></pre><hr id="2078d968-54a6-8042-bde1-da2c8800e73e"/><h3 id="2078d968-54a6-80ba-81e8-d3a74bddfd4c" class="">âœ… æ­¥éª¤äºŒï¼šåœ¨å®ä½“ç±»ä¸Šæ·»åŠ æ ¡éªŒæ³¨è§£</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-80f9-8bb3-efcb7d4d50af" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

public class User {

    private Long id;

    @NotBlank(message = &quot;å§“åä¸èƒ½ä¸ºç©º&quot;)
    private String name;

    @Email(message = &quot;é‚®ç®±æ ¼å¼é”™è¯¯&quot;)
    private String email;

    @Min(value = 18, message = &quot;å¹´é¾„ä¸èƒ½å°äº18å²&quot;)
    private Integer age;

    // getter/setter ç•¥
}

</code></pre><p id="2078d968-54a6-801a-8652-f511eacd74bb" class="">å¸¸ç”¨æ ¡éªŒæ³¨è§£æ±‡æ€»ï¼š</p><table id="2078d968-54a6-80c2-82ea-ea55546d513d" class="simple-table"><tbody><tr id="2078d968-54a6-808f-955c-de2ce08c6e35"><td id="cRn:" class="">æ³¨è§£å</td><td id="\K;b" class="">åŠŸèƒ½è¯´æ˜</td></tr><tr id="2078d968-54a6-800d-aeda-eac374e1a243"><td id="cRn:" class=""><code>@NotBlank</code></td><td id="\K;b" class="">å­—ç¬¦ä¸²éç©º</td></tr><tr id="2078d968-54a6-8055-8b1d-d9c004a972fe"><td id="cRn:" class=""><code>@NotNull</code></td><td id="\K;b" class="">ä»»æ„ç±»å‹éç©º</td></tr><tr id="2078d968-54a6-80b2-b4dc-c819af74fc8e"><td id="cRn:" class=""><code>@Email</code></td><td id="\K;b" class="">é‚®ç®±æ ¼å¼éªŒè¯</td></tr><tr id="2078d968-54a6-8010-b84d-e4d6a1e5adc2"><td id="cRn:" class=""><code>@Min</code></td><td id="\K;b" class="">æœ€å°å€¼ï¼ˆæ•°å­—ï¼‰</td></tr><tr id="2078d968-54a6-807d-85a9-d5c85d6c94cf"><td id="cRn:" class=""><code>@Max</code></td><td id="\K;b" class="">æœ€å¤§å€¼</td></tr><tr id="2078d968-54a6-80f8-b30b-c6cce76fca6d"><td id="cRn:" class=""><code>@Size</code></td><td id="\K;b" class="">å­—ç¬¦ä¸²é•¿åº¦é™åˆ¶</td></tr><tr id="2078d968-54a6-80c8-9ee4-c18e3da19599"><td id="cRn:" class=""><code>@Pattern</code></td><td id="\K;b" class="">æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</td></tr></tbody></table><hr id="2078d968-54a6-8080-95f0-c3183e04baee"/><h3 id="2078d968-54a6-8090-aff0-eeff02b1aabd" class="">âœ… æ­¥éª¤ä¸‰ï¼šåœ¨æ§åˆ¶å™¨ä¸­å¯ç”¨æ ¡éªŒ</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8087-ab0a-dd409a0dfff2" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

@PostMapping(&quot;/add&quot;)
public Result&lt;?&gt; addUser(@Valid @RequestBody User user) {
    return Result.success(user);
}

</code></pre><p id="2078d968-54a6-80c4-b650-f647a415207d" class=""><code>@Valid</code> å¯ç”¨æ ¡éªŒï¼Œ<code>@RequestBody</code> ç»‘å®š JSON è¯·æ±‚ä½“</p><p id="2078d968-54a6-8096-b2e4-fef665276c5b" class="">å¦‚æ ¡éªŒä¸é€šè¿‡ä¼šæŠ›å‡º <code>MethodArgumentNotValidException</code></p><hr id="2078d968-54a6-8003-9db8-fa0e2b73c152"/><h2 id="2078d968-54a6-80af-9a3f-e38b8df61890" class="">3. å¦‚æœä¸å¤„ç†å¼‚å¸¸ï¼Œåç«¯å°†è¿”å›ä»€ä¹ˆï¼Ÿ</h2><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8092-988f-c41f3debd1e4" class="code"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">json

{
  &quot;timestamp&quot;: &quot;2025-06-03T12:34:56&quot;,
  &quot;status&quot;: 400,
  &quot;error&quot;: &quot;Bad Request&quot;,
  &quot;message&quot;: &quot;Validation failed for object=&#x27;user&#x27;&quot;,
  ...
}

</code></pre><p id="2078d968-54a6-8035-a53c-fa275d42f6b4" class=""> è¿™ç§é”™è¯¯æç¤ºéå¸¸æ‚ä¹±ï¼Œä¸å‹å¥½ï¼Œä¹Ÿä¼šæš´éœ²åç«¯å®ç°ç»†èŠ‚ã€‚</p><hr id="2078d968-54a6-8061-bf6f-c05e5e1af9b4"/><h2 id="2078d968-54a6-80d4-9c37-eac294e12cb9" class="">4. ç¼–å†™å…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼ˆæ¨èï¼‰</h2><hr id="2078d968-54a6-80dc-a9bc-c16222d21145"/><h3 id="2078d968-54a6-80e8-85bb-c58508e79beb" class="">âœ… æ­¥éª¤ä¸€ï¼šåˆ›å»ºç»Ÿä¸€å¼‚å¸¸å¤„ç†ç±»</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8036-84fc-fc14ee18d1fc" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

@RestControllerAdvice
public class GlobalExceptionHandler {

    // å‚æ•°æ ¡éªŒå¼‚å¸¸å¤„ç†
    @ExceptionHandler(MethodArgumentNotValidException.class)
    public Result&lt;?&gt; handleValidException(MethodArgumentNotValidException e) {
        // è·å–ç¬¬ä¸€ä¸ªå­—æ®µé”™è¯¯ä¿¡æ¯
        String msg = e.getBindingResult().getFieldError().getDefaultMessage();
        return Result.error(&quot;å‚æ•°æ ¡éªŒå¤±è´¥ï¼š&quot; + msg);
    }

    // æ‰€æœ‰è¿è¡Œæ—¶å¼‚å¸¸ç»Ÿä¸€å¤„ç†
    @ExceptionHandler(RuntimeException.class)
    public Result&lt;?&gt; handleRuntimeException(RuntimeException e) {
        return Result.error(&quot;ç³»ç»Ÿé”™è¯¯ï¼š&quot; + e.getMessage());
    }

    // è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†ä¹Ÿå¯åŠ åœ¨è¿™é‡Œ
}

//@RestControllerAdvice ä½œç”¨ç±»ä¼¼äºå…¨å±€ try-catch æ‹¦æˆªå™¨ï¼Œé…åˆ @ExceptionHandler æ‹¦æˆªæŒ‡å®šç±»å‹å¼‚å¸¸ã€‚</code></pre><hr id="2078d968-54a6-80c6-9f6f-c46618e4fea0"/><h3 id="2078d968-54a6-80dd-9c50-f9b4d31b33ca" class="">âœ… å¼‚å¸¸è¿”å›æ ¼å¼ç¤ºä¾‹ï¼š</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8045-8f27-d65d0a6732d4" class="code"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">json
{
  &quot;code&quot;: 500,
  &quot;message&quot;: &quot;å‚æ•°æ ¡éªŒå¤±è´¥ï¼šå§“åä¸èƒ½ä¸ºç©º&quot;,
  &quot;data&quot;: null}

</code></pre><p id="2078d968-54a6-8045-a6e6-c8fa21c5d357" class="">ç»Ÿä¸€é£æ ¼ã€æ˜“äºå‰ç«¯å¤„ç†ï¼Œä¹Ÿé¿å…äº†æ¡†æ¶è‡ªå¸¦çš„æ··ä¹±æŠ¥é”™ã€‚</p><hr id="2078d968-54a6-800d-af1b-cfdb4ac71ab1"/><h2 id="2078d968-54a6-8034-a4c9-eeaddd4482ef" class="">5. å®Œæ•´ç¤ºä¾‹æ¼”ç»ƒï¼šç”¨æˆ·æ³¨å†Œæ¥å£æ ¡éªŒ + é”™è¯¯å¤„ç†</h2><hr id="2078d968-54a6-8045-93be-d75e6713f8e2"/><h3 id="2078d968-54a6-801c-8332-f1c54ed07b82" class="">âœ… User å®ä½“ç±»ï¼ˆå«æ³¨é‡Šï¼‰ï¼š</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-80e7-886f-c9ea56301034" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

public class User {

    private Long id;

    @NotBlank(message = &quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&quot;)
    private String name;

    @Email(message = &quot;é‚®ç®±æ ¼å¼ä¸æ­£ç¡®&quot;)
    private String email;

    @Min(value = 18, message = &quot;å¹´é¾„ä¸èƒ½å°äº18&quot;)
    private Integer age;

    // getter/setter
}

</code></pre><hr id="2078d968-54a6-805a-b8c5-e68e6a43c4ae"/><h3 id="2078d968-54a6-80ef-8d16-f64e71efb2ad" class="">âœ… Controller ç¤ºä¾‹ï¼š</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8001-8be5-f59f24abdf32" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

@RestController
@RequestMapping(&quot;/api/user&quot;)
public class UserController {

    // æ¨¡æ‹Ÿæ·»åŠ ç”¨æˆ·
    @PostMapping(&quot;/register&quot;)
    public Result&lt;?&gt; register(@Valid @RequestBody User user) {
        // è¿™é‡Œåªæ¨¡æ‹Ÿè¿”å›ï¼Œå®é™…åº”è°ƒç”¨ service å±‚ä¿å­˜
        return Result.success(&quot;æ³¨å†ŒæˆåŠŸï¼&quot;);
    }
}

</code></pre><hr id="2078d968-54a6-8041-b303-f3dbf58f40f7"/><h3 id="2078d968-54a6-80d4-a6d7-f69cdfab42a8" class="">è¿”å›ç»“æœæ¼”ç¤º</h3><p id="2078d968-54a6-80d0-9294-fa9154db5daf" class="">âœ… æ­£ç¡®è¯·æ±‚ï¼š</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-805d-8864-dad9df95f007" class="code"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">json

{
  &quot;name&quot;: &quot;å¼ ä¸‰&quot;,
  &quot;email&quot;: &quot;zhang@example.com&quot;,
  &quot;age&quot;: 22
}

</code></pre><p id="2078d968-54a6-802d-8651-db2bd838f2b4" class="">âœ… é”™è¯¯è¯·æ±‚ï¼š</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8042-91c6-c90e9711d938" class="code"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">json

{
  &quot;name&quot;: &quot;&quot;,
  &quot;email&quot;: &quot;abc&quot;,
  &quot;age&quot;: 15
}

</code></pre><p id="2078d968-54a6-808f-8d82-dc3f2f38a5fd" class="">è¿”å›ç»“æœï¼š</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8068-8fff-c7a7fd782aaa" class="code"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">json

{
  &quot;code&quot;: 500,
  &quot;message&quot;: &quot;å‚æ•°æ ¡éªŒå¤±è´¥ï¼šç”¨æˆ·åä¸èƒ½ä¸ºç©º&quot;,
  &quot;data&quot;: null}

</code></pre><hr id="2078d968-54a6-8042-a14d-fcbf65ba377f"/><h2 id="2078d968-54a6-808f-af46-ebd24eebabb4" class="">ğŸ§  é¢è¯•å¼ºåŒ–é—®é¢˜</h2><hr id="2078d968-54a6-80b0-b923-e28b3b22477f"/><h3 id="2078d968-54a6-80e7-946c-f4fcaa2280e1" class="">â“ Q1ï¼šSpring Boot ä¸­å¦‚ä½•å®ç°å‚æ•°æ ¡éªŒï¼Ÿ</h3><p id="2078d968-54a6-80ff-83ae-d38a7fe216de" class="">âœ… å›ç­”è¦ç‚¹ï¼š</p><blockquote id="2078d968-54a6-80c7-9685-e5e599d5614d" class="">ä½¿ç”¨ Bean Validation è§„èŒƒï¼ˆJSR-303ï¼‰ï¼Œé…åˆ @Valid æ³¨è§£å¯¹å®ä½“ç±»å‚æ•°è¿›è¡Œè‡ªåŠ¨æ ¡éªŒï¼Œå¹¶åœ¨å­—æ®µä¸Šæ·»åŠ  @NotBlankã€@Email ç­‰æ³¨è§£ã€‚é…åˆ @RestControllerAdvice ç»Ÿä¸€å¤„ç†å¼‚å¸¸ã€‚</blockquote><hr id="2078d968-54a6-80d8-8ffb-f8d3eb759675"/><h3 id="2078d968-54a6-800f-a6f2-e1b9d2ba9764" class="">â“ Q2ï¼šå…¨å±€å¼‚å¸¸å¤„ç†çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å®ç°ï¼Ÿ</h3><p id="2078d968-54a6-80a3-a7fb-e4eb59a9a3e4" class="">âœ… å›ç­”è¦ç‚¹ï¼š</p><blockquote id="2078d968-54a6-8065-90d9-e6148c80c9b8" class="">ä¸ºäº†ç»Ÿä¸€æ ¼å¼è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œé¿å…ç³»ç»ŸæŠ¥é”™å †æ ˆæš´éœ²ã€‚å®ç°æ–¹å¼æ˜¯å®šä¹‰ä¸€ä¸ª @RestControllerAdvice ç±»ï¼Œå¹¶ç”¨ @ExceptionHandler æ³¨è§£ç¼–å†™å¼‚å¸¸æ‹¦æˆªæ–¹æ³•ã€‚</blockquote><hr id="2078d968-54a6-80dd-8e2e-d6ca94d899be"/><h3 id="2078d968-54a6-803c-af2e-dfdb9d6b55f7" class="">â“ Q3ï¼šä½ å¦‚ä½•å¤„ç†å¤šä¸ªå­—æ®µé”™è¯¯ä¿¡æ¯ï¼Ÿ</h3><p id="2078d968-54a6-8037-8a42-f0d76d9905f2" class="">âœ… æ‹“å±•ç­”æ¡ˆï¼š</p><blockquote id="2078d968-54a6-8039-8db7-e4ee18eef294" class="">å¯ä»¥å°† e.getBindingResult().getAllErrors() è½¬æˆ Listï¼Œå†æ‹¼æ¥å¤šä¸ªå­—æ®µçš„é”™è¯¯ä¿¡æ¯ä¸€èµ·è¿”å›ï¼Œå¢å¼ºç”¨æˆ·ä½“éªŒã€‚</blockquote><hr id="2078d968-54a6-807d-8d13-ffdce72ccd76"/><hr id="2078d968-54a6-80c1-8eca-da661c132209"/><h2 id="2078d968-54a6-80ab-a0af-ef77e96a36b8" class="">ğŸ“š å°ç»“å¤ç›˜</h2><table id="2078d968-54a6-8052-af62-fab04bf56594" class="simple-table"><tbody><tr id="2078d968-54a6-8098-9b25-eecaf750366d"><td id="&lt;d^f" class="">çŸ¥è¯†ç‚¹</td><td id="n&lt;:U" class="">è¯´æ˜</td></tr><tr id="2078d968-54a6-80a1-9dde-cdb6b1f8c4c7"><td id="&lt;d^f" class="">å‚æ•°æ ¡éªŒæ³¨è§£</td><td id="n&lt;:U" class="">ä½¿ç”¨ <code>@Valid</code> æ­é… <code>@NotBlank</code>, <code>@Email</code> ç­‰</td></tr><tr id="2078d968-54a6-8075-8859-fb55ab738423"><td id="&lt;d^f" class="">æ ¡éªŒå¤±è´¥å¼‚å¸¸</td><td id="n&lt;:U" class=""><code>MethodArgumentNotValidException</code></td></tr><tr id="2078d968-54a6-8084-a4bc-c5c76b90e859"><td id="&lt;d^f" class="">å…¨å±€å¼‚å¸¸å¤„ç†ç±»</td><td id="n&lt;:U" class="">ä½¿ç”¨ <code>@RestControllerAdvice</code> + <code>@ExceptionHandler</code></td></tr><tr id="2078d968-54a6-8052-b930-fd88b3258b60"><td id="&lt;d^f" class="">è¿”å›ç»Ÿä¸€ JSON æ ¼å¼</td><td id="n&lt;:U" class="">ä½¿ç”¨ <code>Result&lt;T&gt;</code> å°è£…è¿”å›ç»“æœ</td></tr><tr id="2078d968-54a6-800a-9966-c6a963e83932"><td id="&lt;d^f" class="">é¢è¯•é‡ç‚¹</td><td id="n&lt;:U" class="">å‚æ•°æ ¡éªŒæœºåˆ¶ + å…¨å±€å¼‚å¸¸ + è‡ªå®šä¹‰æ¶ˆæ¯å¤„ç†</td></tr></tbody></table><p id="2078d968-54a6-8068-9ce5-cf389ce11943" class="">
</p><p id="2078d968-54a6-806b-b4a8-f0a08ad14be4" class="">
</p><p id="2078d968-54a6-80a3-9c68-e9a7275d18a1" class="">
</p><p id="2078d968-54a6-800a-a0dd-c9f7af24a4b9" class="">
</p><p id="2078d968-54a6-804c-a62d-f97289c720dc" class="">
</p><h1 id="s8" class="">ç¬¬8ç« ï¼šé…ç½®æ–‡ä»¶è¯¦è§£ä¸å¤šç¯å¢ƒç®¡ç†ï¼ˆapplication.yml é«˜çº§ç”¨æ³•ï¼‰</h1><blockquote id="2078d968-54a6-8000-8467-fe42d431fee9" class="">âœ… æœ¬ç« ç›®æ ‡ï¼š<ul id="2078d968-54a6-8047-97e0-e3bced60c5cb" class="bulleted-list"><li style="list-style-type:disc">ç†è§£ Spring Boot é…ç½®æ–‡ä»¶çš„åŠ è½½åŸç†</li></ul><ul id="2078d968-54a6-80aa-b384-dc71201a3ca2" class="bulleted-list"><li style="list-style-type:disc">æŒæ¡ <code>application.yml</code> ä¸ <code>application.properties</code> çš„åŒºåˆ«</li></ul><ul id="2078d968-54a6-8070-8b09-fa5b3d6fb7bf" class="bulleted-list"><li style="list-style-type:disc">å®ç°å¤šç¯å¢ƒï¼ˆdev/test/prodï¼‰é…ç½®åˆ‡æ¢</li></ul><ul id="2078d968-54a6-8046-a547-e96e3d0964c7" class="bulleted-list"><li style="list-style-type:disc">å­¦ä¼šè¯»å–é…ç½®å€¼åˆ° Java ç±»</li></ul><ul id="2078d968-54a6-8071-800e-c42c2797b627" class="bulleted-list"><li style="list-style-type:disc">ğŸŒŸ æ‹“å±•ï¼šå¸¸è§é…ç½®é¡¹æ¸…å• + é¢è¯•é‡ç‚¹è§£æ</li></ul><ul id="2078d968-54a6-802d-a1be-ce592cefe0b8" class="bulleted-list"><li style="list-style-type:disc">ğŸ“Œ é…åˆè¯¦ç»†æ³¨é‡Šï¼Œå¸®åŠ©ä½ æŒæ¡åº•å±‚é€»è¾‘</li></ul></blockquote><hr id="2078d968-54a6-8052-971b-e613b6c7fd10"/><h2 id="2078d968-54a6-8089-8ae0-cafda124f10d" class="">1. Spring Boot é…ç½®æ–‡ä»¶ç±»å‹å¯¹æ¯”</h2><table id="2078d968-54a6-8029-bd43-ca651a936ee0" class="simple-table"><tbody><tr id="2078d968-54a6-8092-8687-fb05a8e222c2"><td id="A{d}" class="">æ ¼å¼</td><td id="AZ&gt;l" class="">æè¿°</td><td id="FOed" class="">æ¨èç¨‹åº¦</td></tr><tr id="2078d968-54a6-80ac-a84e-f4837c8c2b95"><td id="A{d}" class=""><code>application.properties</code></td><td id="AZ&gt;l" class="">ä¼ ç»Ÿ key=value æ ¼å¼</td><td id="FOed" class="">âœ… ç®€å•é…ç½®é€‚åˆ</td></tr><tr id="2078d968-54a6-809d-90f9-ec468f587401"><td id="A{d}" class=""><code>application.yml</code></td><td id="AZ&gt;l" class="">å±‚çº§ç¼©è¿›ç»“æ„ï¼Œæ”¯æŒæ•°ç»„ç­‰å¤æ‚é…ç½®</td><td id="FOed" class="">âœ… æ¨èä½¿ç”¨</td></tr></tbody></table><hr id="2078d968-54a6-805d-aaaf-fc1a188d4b92"/><h3 id="2078d968-54a6-80ac-b29f-d844d5b9529e" class="">âœ… ç¤ºä¾‹å¯¹æ¯”</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-80e9-ad1b-ff883684bb0f" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">properties

server.port=8081
spring.application.name=myapp

</code></pre><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-80e6-a379-c47344c80ff3" class="code"><code class="language-YAML" style="white-space:pre-wrap;word-break:break-all">yaml

server:
  port: 8081
spring:
  application:
    name: myapp

</code></pre><p id="2078d968-54a6-8032-9d22-df977157851e" class="">ğŸŸ¡ <code>application.yml</code> æ”¯æŒç»“æ„åŒ–å’Œæ•°ç»„ï¼Œæ˜¯ç°ä»£é¡¹ç›®é¦–é€‰ã€‚</p><hr id="2078d968-54a6-8062-a8fb-ea101e15d29c"/><h2 id="2078d968-54a6-80ec-bdca-e2ee785f3af8" class="">2. å¸¸è§é…ç½®é¡¹åˆ†ç±»æ¸…å•</h2><table id="2078d968-54a6-8007-9da7-dfc90d2a9869" class="simple-table"><tbody><tr id="2078d968-54a6-800b-9051-ded16dff08df"><td id="g_HS" class="">ç±»åˆ«</td><td id="Z|ib" class="">ç¤ºä¾‹é…ç½®é¡¹</td></tr><tr id="2078d968-54a6-800b-95da-ea0251a818a9"><td id="g_HS" class="">æœåŠ¡é…ç½®</td><td id="Z|ib" class=""><code>server.port</code>, <code>server.servlet.context-path</code></td></tr><tr id="2078d968-54a6-80fa-ae2d-e17a7c8032b6"><td id="g_HS" class="">æ•°æ®æºé…ç½®</td><td id="Z|ib" class=""><code>spring.datasource.url</code>, <code>username</code>, <code>password</code></td></tr><tr id="2078d968-54a6-800e-be73-cbf7e4b3bd3c"><td id="g_HS" class="">JPAé…ç½®</td><td id="Z|ib" class=""><code>spring.jpa.show-sql</code>, <code>hibernate.ddl-auto</code></td></tr><tr id="2078d968-54a6-800e-80fb-f2cc2e7c7eb0"><td id="g_HS" class="">æ–‡ä»¶ä¸Šä¼ é™åˆ¶</td><td id="Z|ib" class=""><code>spring.servlet.multipart.max-file-size</code></td></tr><tr id="2078d968-54a6-80e5-8914-f9fb65ca30e2"><td id="g_HS" class="">æ—¥å¿—çº§åˆ«</td><td id="Z|ib" class=""><code>logging.level.root=info</code></td></tr><tr id="2078d968-54a6-8093-b60e-f29b01250392"><td id="g_HS" class="">å›½é™…åŒ–é…ç½®</td><td id="Z|ib" class=""><code>spring.messages.basename=messages</code></td></tr><tr id="2078d968-54a6-8032-9b5f-faf51559602e"><td id="g_HS" class="">è‡ªå®šä¹‰é…ç½®é¡¹</td><td id="Z|ib" class=""><code>myconfig.name</code>, <code>myconfig.description</code></td></tr></tbody></table><hr id="2078d968-54a6-80b6-907d-c73ded521188"/><h2 id="2078d968-54a6-8064-b883-c73fe4c97197" class="">3. å¤šç¯å¢ƒé…ç½®ï¼ˆdev/test/prodï¼‰</h2><p id="2078d968-54a6-80eb-8104-e2985f39fa8f" class="">Spring Boot æ”¯æŒå¤šä¸ªé…ç½®æ–‡ä»¶ï¼ŒæŒ‰ç¯å¢ƒåˆ‡æ¢åŠ è½½ï¼š</p><h3 id="2078d968-54a6-802a-87c2-dda39337c12c" class="">âœ… ç¤ºä¾‹ç»“æ„ï¼š</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-80e8-a549-f8d987d219e6" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">

src/
 â””â”€â”€ main/
     â””â”€â”€ resources/
         â”œâ”€â”€ application.yml
         â”œâ”€â”€ application-dev.yml
         â”œâ”€â”€ application-test.yml
         â””â”€â”€ application-prod.yml

</code></pre><hr id="2078d968-54a6-8067-8d21-f286ab108c2a"/><h3 id="2078d968-54a6-8089-80d6-fdf04c96c588" class="">âœ… application.ymlï¼ˆä¸»é…ç½®ï¼‰</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-80f3-8379-c762fc7c08c8" class="code"><code class="language-YAML" style="white-space:pre-wrap;word-break:break-all">yaml

spring:
  profiles:
    active: dev  # æ¿€æ´»å“ªä¸ªç¯å¢ƒï¼ˆdev/test/prodï¼‰

</code></pre><hr id="2078d968-54a6-80a8-84d8-e86d4b6dbd6c"/><h3 id="2078d968-54a6-80fb-b10d-f7efdf134aee" class="">âœ… application-dev.ymlï¼ˆå¼€å‘ç¯å¢ƒï¼‰</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-80e6-a9bc-e12da4bf9b10" class="code"><code class="language-YAML" style="white-space:pre-wrap;word-break:break-all">yaml

server:
  port: 8081
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/dev_db
    username: root
    password: dev123

</code></pre><hr id="2078d968-54a6-80e8-98d2-f5669cce3c0a"/><h3 id="2078d968-54a6-80e9-b946-c29ba9b1e1c7" class="">âœ… application-prod.ymlï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8018-b7dd-e83460395f29" class="code"><code class="language-YAML" style="white-space:pre-wrap;word-break:break-all">yaml

server:
  port: 80
spring:
  datasource:
    url: jdbc:mysql://prod-db:3306/prod_db
    username: admin
    password: prodSecure

</code></pre><hr id="2078d968-54a6-80ec-a64a-d913905c5f19"/><h2 id="2078d968-54a6-8024-8678-dc18fbded6e9" class="">4. å¯åŠ¨æ—¶åŠ¨æ€åˆ‡æ¢ç¯å¢ƒ</h2><h3 id="2078d968-54a6-8005-adcc-d5307fa3da30" class="">ğŸ“Œ æ–¹å¼ä¸€ï¼šä¿®æ”¹ <code>application.yml</code> ä¸­çš„ active</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-80f5-8d07-e5642d4435e0" class="code"><code class="language-YAML" style="white-space:pre-wrap;word-break:break-all">yaml

spring:
  profiles:
    active: prod

</code></pre><hr id="2078d968-54a6-80cf-bc99-ffb897b86d8a"/><h3 id="2078d968-54a6-805b-a85b-ebcaf2d7438e" class="">æ–¹å¼äºŒï¼šå‘½ä»¤è¡Œå¯åŠ¨å‚æ•°ï¼ˆæ¨èç”Ÿäº§éƒ¨ç½²ï¼‰</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-80a8-8733-c4fe6a10e88a" class="code"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">

java -jar myapp.jar --spring.profiles.active=prod

</code></pre><blockquote id="2078d968-54a6-8057-afbf-f8da751cd39b" class="">âœ… é€‚ç”¨äº CI/CD æŒç»­é›†æˆã€Docker å¯åŠ¨ç­‰åœºæ™¯</blockquote><hr id="2078d968-54a6-8023-a63f-d16a0503b3d2"/><h2 id="2078d968-54a6-8064-b123-c60ddc987cf5" class="">5. è‡ªå®šä¹‰é…ç½®é¡¹è¯»å–ï¼ˆè‡ªåŠ¨æ³¨å…¥åˆ°ç±»ä¸­ï¼‰</h2><hr id="2078d968-54a6-80ff-b662-f35010487554"/><h3 id="2078d968-54a6-80ad-835e-e1d73fd99e2c" class="">âœ… application.yml ä¸­å®šä¹‰ï¼š</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-806a-91b3-f0ad0706bfd5" class="code"><code class="language-YAML" style="white-space:pre-wrap;word-break:break-all">yaml

myconfig:
  title: SpringBoot å­¦ä¹ ç³»ç»Ÿ
  description: æœ¬é¡¹ç›®ç”¨äºå…¥é—¨ä¸å®æˆ˜

</code></pre><hr id="2078d968-54a6-80ac-b084-c2140a7f58e6"/><h3 id="2078d968-54a6-8080-8aa3-f207ec050759" class="">âœ… Java ä¸­è¯»å–é…ç½®ç±»ï¼š</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8096-8d9a-d1af25301ec1" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

@Component
@ConfigurationProperties(prefix = &quot;myconfig&quot;)
public class MyConfig {

    private String title;
    private String description;

    // getter / setter å¿…é¡»åŠ 
}

</code></pre><blockquote id="2078d968-54a6-8034-85c9-d04dbea72126" class="">ğŸ“Œ @ConfigurationProperties æ˜¯è‡ªåŠ¨æ‰¹é‡æ³¨å…¥ï¼Œé€‚åˆå¯¹è±¡å±‚çº§è¾ƒå¤šçš„é…ç½®ã€‚</blockquote><hr id="2078d968-54a6-8098-8475-dba1c4f6bdaa"/><h3 id="2078d968-54a6-808c-95c6-ea1f4e336c02" class="">âœ… åœ¨ Controller ä¸­ä½¿ç”¨ï¼š</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8050-a21c-e33758413ff0" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

@RestController
public class ConfigController {

    @Autowired
    private MyConfig myConfig;

    @GetMapping(&quot;/config&quot;)
    public Result&lt;?&gt; getConfig() {
        return Result.success(myConfig);
    }
}

</code></pre><hr id="2078d968-54a6-8054-acdd-cd69e9951877"/><h2 id="2078d968-54a6-80dd-a741-f03f0a5135e8" class="">è¡¥å……ï¼šé…ç½®ä¼˜å…ˆçº§åŠ è½½é¡ºåº</h2><p id="2078d968-54a6-8080-9afc-fc4dfedd3daa" class="">Spring Boot ä¼šæŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§åŠ è½½é…ç½®ï¼ˆç”±é«˜åˆ°ä½ï¼‰ï¼š</p><ol type="1" id="2078d968-54a6-80e4-9fcc-ea046667dadd" class="numbered-list" start="1"><li>å‘½ä»¤è¡Œå‚æ•°ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰</li></ol><ol type="1" id="2078d968-54a6-80ad-8dd5-f2db198f1385" class="numbered-list" start="2"><li><code>application-{profile}.yml</code>ï¼ˆæ ¹æ®å½“å‰æ¿€æ´»çš„ç¯å¢ƒï¼‰</li></ol><ol type="1" id="2078d968-54a6-801a-b163-d5cd675b1f08" class="numbered-list" start="3"><li><code>application.yml</code>ï¼ˆé»˜è®¤é…ç½®ï¼‰</li></ol><ol type="1" id="2078d968-54a6-807a-963f-c2129f4d5f64" class="numbered-list" start="4"><li><code>@PropertySource</code> æŒ‡å®šæ–‡ä»¶</li></ol><ol type="1" id="2078d968-54a6-80a1-8144-edbdbc2964da" class="numbered-list" start="5"><li>é»˜è®¤å€¼ï¼ˆä»£ç ä¸­ç¡¬ç¼–ç ï¼‰</li></ol><blockquote id="2078d968-54a6-80b4-afd2-dcbb41939142" class="">æ¨èåŸåˆ™ï¼šå…¬å…±é…ç½®å†™åœ¨ä¸»é…ç½®æ–‡ä»¶ï¼Œç¯å¢ƒå·®å¼‚å†™åˆ° profile æ–‡ä»¶ä¸­</blockquote><hr id="2078d968-54a6-803e-8e1a-f514e42c8351"/><h2 id="2078d968-54a6-8028-8593-d773b6636e4a" class="">ğŸ§  é¢è¯•å¼ºåŒ–é—®é¢˜</h2><hr id="2078d968-54a6-8042-b80f-f4ea02189e53"/><h3 id="2078d968-54a6-801a-a8ac-e04bc6579b67" class="">â“ Q1ï¼šSpring Boot å¦‚ä½•æ”¯æŒå¤šç¯å¢ƒé…ç½®ï¼Ÿ</h3><p id="2078d968-54a6-802c-a012-cd31ded9fec6" class="">âœ… å›ç­”è¦ç‚¹ï¼š</p><blockquote id="2078d968-54a6-8099-862f-f0f692fa044f" class="">Spring Boot é€šè¿‡ profile æœºåˆ¶æ”¯æŒå¤šé…ç½®æ–‡ä»¶ï¼ˆå¦‚ application-dev.ymlã€-test.ymlï¼‰ï¼Œå¹¶é€šè¿‡ spring.profiles.active æ§åˆ¶åŠ è½½å“ªä¸ªé…ç½®ã€‚è¿˜å¯é€šè¿‡å‘½ä»¤è¡Œå‚æ•°åˆ‡æ¢ç¯å¢ƒï¼Œé€‚åˆ CI/CD æµæ°´çº¿ä½¿ç”¨ã€‚</blockquote><hr id="2078d968-54a6-80df-afd7-ee59cdd7e0e3"/><h3 id="2078d968-54a6-8081-bc17-c8c7c8d1589e" class="">â“ Q2ï¼šä½ é¡¹ç›®ä¸­å¦‚ä½•ç®¡ç†æ•æ„Ÿé…ç½®ï¼ˆå¦‚æ•°æ®åº“å¯†ç ï¼‰ï¼Ÿ</h3><p id="2078d968-54a6-8051-a5a1-ce0df6bead86" class="">âœ… å›ç­”æŠ€å·§ï¼š</p><blockquote id="2078d968-54a6-8066-bc54-ce4a7b1d2cc0" class="">ä½¿ç”¨ profile éš”ç¦»ï¼ˆprod ä¸ dev åˆ†å¼€ï¼‰ç”Ÿäº§ç¯å¢ƒé…ç½®ä¸å†™å…¥æºç ï¼Œè€Œæ˜¯é€šè¿‡å¯åŠ¨å‚æ•°æ³¨å…¥å¯ç»“åˆ Jasypt å®ç°é…ç½®åŠ å¯†ï¼ˆè¿›é˜¶å®‰å…¨å®è·µï¼‰</blockquote><hr id="2078d968-54a6-8090-a34f-ee13e6859e29"/><h3 id="2078d968-54a6-80d2-9912-dc7d5661de37" class="">â“ Q3ï¼šå¦‚ä½•è¯»å–è‡ªå®šä¹‰é…ç½®é¡¹ï¼Ÿä¸ <code>@Value</code> åŒºåˆ«ï¼Ÿ</h3><table id="2078d968-54a6-80dc-a6f2-c0621799b861" class="simple-table"><tbody><tr id="2078d968-54a6-80cf-86d3-cbaf936dc19f"><td id="=dHd" class="">æ³¨è§£</td><td id="AocY" class="">è¯´æ˜</td></tr><tr id="2078d968-54a6-80d6-9faf-fbbf3e540f6c"><td id="=dHd" class=""><code>@Value</code></td><td id="AocY" class="">è¯»å–å•ä¸ªé…ç½®å€¼ï¼ˆé€‚åˆé›¶æ•£é¡¹ï¼‰</td></tr><tr id="2078d968-54a6-80ba-babb-ca2e1a6e187e"><td id="=dHd" class=""><code>@ConfigurationProperties</code></td><td id="AocY" class="">æ‰¹é‡æ³¨å…¥é…ç½®ï¼ˆé€‚åˆç»“æ„åŒ–æ•°æ®ï¼‰</td></tr></tbody></table><hr id="2078d968-54a6-80c3-b3e5-c0c34ccc76ad"/><h2 id="2078d968-54a6-80c6-9b31-d9ecdf0e829b" class="">ğŸ“š å°ç»“å›é¡¾</h2><table id="2078d968-54a6-8013-b31a-d900bd3b48b0" class="simple-table"><tbody><tr id="2078d968-54a6-807c-9fef-f073a3d193e6"><td id="oDlf" class="">çŸ¥è¯†ç‚¹</td><td id="p@KZ" class="">å†…å®¹è¯´æ˜</td></tr><tr id="2078d968-54a6-803d-92f6-fcecdbb1c9c5"><td id="oDlf" class="">é…ç½®æ ¼å¼</td><td id="p@KZ" class="">æ¨èä½¿ç”¨ <code>application.yml</code> ç»“æ„åŒ–æ¸…æ™°</td></tr><tr id="2078d968-54a6-805b-a405-c613a8597f03"><td id="oDlf" class="">å¤šç¯å¢ƒåˆ‡æ¢</td><td id="p@KZ" class=""><code>spring.profiles.active</code> å®ç° dev/test/prod åˆ†ç¦»</td></tr><tr id="2078d968-54a6-80f1-9b9b-c4b014851645"><td id="oDlf" class="">é…ç½®å€¼æ³¨å…¥</td><td id="p@KZ" class="">ç”¨ <code>@Value</code> æˆ– <code>@ConfigurationProperties</code></td></tr><tr id="2078d968-54a6-8074-98b4-fda6caf4bc8b"><td id="oDlf" class="">é…ç½®ä¼˜å…ˆçº§</td><td id="p@KZ" class="">å‘½ä»¤è¡Œå‚æ•° &gt; profile æ–‡ä»¶ &gt; ä¸»æ–‡ä»¶ &gt; é»˜è®¤å€¼</td></tr><tr id="2078d968-54a6-808b-bd1b-ef1066b9af72"><td id="oDlf" class="">å®æˆ˜å»ºè®®</td><td id="p@KZ" class="">é…ç½®æ–‡ä»¶ç»“æ„åˆç†ã€æ•æ„Ÿä¿¡æ¯å¤–ç½®ã€å®‰å…¨å¯ç»´æŠ¤</td></tr></tbody></table><p id="2078d968-54a6-80b9-b4af-fc0874b0dd7d" class="">
</p><p id="2078d968-54a6-80f3-912c-f9962286f109" class="">
</p><p id="2078d968-54a6-8010-8711-d2e04231fdaf" class="">
</p><p id="2078d968-54a6-8056-9b29-db05768168d9" class="">
</p><p id="2078d968-54a6-806d-8eb3-fb6cdf8bd97b" class="">
</p><h1 id="s9" class="">ç¬¬9ç« ï¼šSpring Security ä¸è®¤è¯æˆæƒåŸºç¡€ï¼ˆJWT ç™»å½•æµç¨‹ï¼‰</h1><blockquote id="2078d968-54a6-8014-aa29-f7b148dc4a76" class="">âœ… æœ¬ç« ç›®æ ‡ï¼š<ul id="2078d968-54a6-80a9-b92d-ee7b0b2f61b4" class="bulleted-list"><li style="list-style-type:disc">ç†è§£ä»€ä¹ˆæ˜¯è®¤è¯ï¼ˆAuthenticationï¼‰ä¸æˆæƒï¼ˆAuthorizationï¼‰</li></ul><ul id="2078d968-54a6-8060-9887-ea42a1436731" class="bulleted-list"><li style="list-style-type:disc">æŒæ¡ Spring Security çš„åŸºæœ¬ä½¿ç”¨æ–¹å¼</li></ul><ul id="2078d968-54a6-80f0-b6b1-e025ea4dae63" class="bulleted-list"><li style="list-style-type:disc">å®ç°åŸºäº JWT çš„ç™»å½•éªŒè¯æœºåˆ¶</li></ul><ul id="2078d968-54a6-80d1-9a26-fc3a316a2389" class="bulleted-list"><li style="list-style-type:disc">å»ºç«‹å‰åç«¯åˆ†ç¦»é¡¹ç›®ä¸­çš„è®¤è¯å®‰å…¨ä½“ç³»</li></ul><ul id="2078d968-54a6-8081-86eb-e7fca65b8516" class="bulleted-list"><li style="list-style-type:disc">ğŸŒŸ æ‹“å±•ï¼šå®‰å…¨ç›¸å…³é¢è¯•é—®é¢˜æ±‡æ€» + å®æˆ˜æŠ€å·§</li></ul><ul id="2078d968-54a6-80bf-940e-f77f12427a17" class="bulleted-list"><li style="list-style-type:disc">ğŸ“Œ æ‰€æœ‰ä»£ç éƒ½é…æ³¨é‡Šï¼ŒåŠ©ä½ æ·±å…¥ç†è§£æµç¨‹</li></ul></blockquote><hr id="2078d968-54a6-80da-8660-c94c6dc3926e"/><h2 id="2078d968-54a6-806e-be05-fa2263c1ecfa" class="">1. è®¤è¯ä¸æˆæƒçš„åŒºåˆ«</h2><table id="2078d968-54a6-8060-b5bf-d441df4587ee" class="simple-table"><tbody><tr id="2078d968-54a6-8033-a18b-cf5f02725e87"><td id="JgxK" class="">é¡¹ç›®</td><td id="^L`P" class="">è¯´æ˜</td><td id="B@mE" class="">ä¸¾ä¾‹</td></tr><tr id="2078d968-54a6-80cb-9065-c6f5f9a8246e"><td id="JgxK" class="">è®¤è¯</td><td id="^L`P" class="">éªŒè¯ä½ æ˜¯è°</td><td id="B@mE" class="">ç™»å½•æ—¶æ ¡éªŒç”¨æˆ·å/å¯†ç </td></tr><tr id="2078d968-54a6-80fb-93b1-f20e71349f5c"><td id="JgxK" class="">æˆæƒ</td><td id="^L`P" class="">éªŒè¯ä½ èƒ½å¹²ä»€ä¹ˆ</td><td id="B@mE" class="">ä½ æ˜¯å¦èƒ½è®¿é—®ç®¡ç†å‘˜é¡µé¢</td></tr></tbody></table><p id="2078d968-54a6-808c-bc0b-e72901ef4115" class="">ğŸ“Œ åœ¨å®‰å…¨ç³»ç»Ÿä¸­ï¼Œé€šå¸¸æµç¨‹ä¸ºï¼šå…ˆè®¤è¯ï¼Œåæˆæƒã€‚</p><hr id="2078d968-54a6-8000-a90e-ef51fce4e492"/><h2 id="2078d968-54a6-8011-9bc8-ce0d61c4202b" class="">2. Spring Security ç®€ä»‹</h2><p id="2078d968-54a6-80ea-b914-d38f8327706a" class="">Spring Security æ˜¯ä¸€ä¸ªä¸º Spring åº”ç”¨æä¾›<strong>å®‰å…¨ä¿æŠ¤</strong>çš„æ¡†æ¶ï¼Œå…·å¤‡ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ul id="2078d968-54a6-8021-a61c-d17f31e199d6" class="bulleted-list"><li style="list-style-type:disc">ç™»å½•è®¤è¯ï¼ˆæ”¯æŒè¡¨å•ã€JWTã€OAuth ç­‰ï¼‰</li></ul><ul id="2078d968-54a6-8031-9dc4-d27ae9416efd" class="bulleted-list"><li style="list-style-type:disc">æƒé™æ§åˆ¶ï¼ˆè§’è‰²æ§åˆ¶ã€æ–¹æ³•æƒé™ï¼‰</li></ul><ul id="2078d968-54a6-80d0-acd6-f87ac6af6c53" class="bulleted-list"><li style="list-style-type:disc">é˜²æ­¢æ”»å‡»ï¼ˆCSRFã€Session Fixationã€XSSï¼‰</li></ul><ul id="2078d968-54a6-8094-a96e-f126119013f6" class="bulleted-list"><li style="list-style-type:disc">å®‰å…¨è¿‡æ»¤é“¾æœºåˆ¶å¼ºå¤§ï¼Œæ‰©å±•çµæ´»</li></ul><hr id="2078d968-54a6-805c-a7ce-f7cbe058a698"/><h2 id="2078d968-54a6-801d-9f90-fa4549664a5b" class="">3. å¿«é€Ÿå¼•å…¥ Spring Security</h2><hr id="2078d968-54a6-80ca-8a96-c6f2a1c2402a"/><h3 id="2078d968-54a6-8024-9bfb-e0e815cbca15" class="">âœ… æ·»åŠ ä¾èµ–</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8039-872b-ecf421494a4f" class="code"><code class="language-XML" style="white-space:pre-wrap;word-break:break-all">xml

&lt;dependency&gt;
  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
  &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
&lt;/dependency&gt;

</code></pre><hr id="2078d968-54a6-8061-8272-ee3a6483c44c"/><h3 id="2078d968-54a6-8026-b63b-efc7b12e7896" class="">âœ… å¯åŠ¨åé»˜è®¤è¡Œä¸ºï¼š</h3><ul id="2078d968-54a6-80b8-8237-d2560f91854e" class="bulleted-list"><li style="list-style-type:disc">ç³»ç»Ÿè‡ªåŠ¨æ‹¦æˆªæ‰€æœ‰æ¥å£</li></ul><ul id="2078d968-54a6-80a4-aaf7-de3c9d9ada6b" class="bulleted-list"><li style="list-style-type:disc">æ§åˆ¶å°è¾“å‡ºé»˜è®¤ç”¨æˆ·åï¼ˆuserï¼‰å’Œéšæœºå¯†ç </li></ul><ul id="2078d968-54a6-8094-9f02-c61b6d2b61db" class="bulleted-list"><li style="list-style-type:disc">æµè§ˆå™¨è®¿é—®ä»»ä½•åœ°å€éƒ½ä¼šå¼¹å‡ºç™»å½•æ¡†</li></ul><p id="2078d968-54a6-8061-bfc4-de675660cc26" class="">âš ï¸ æ˜¾ç„¶è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ â€”â€” æ¥ä¸‹æ¥æˆ‘ä»¬å°†è‡ªå®šä¹‰æ•´ä¸ªè®¤è¯æµç¨‹ï¼ˆæ”¹ç”¨ JWTï¼‰ã€‚</p><hr id="2078d968-54a6-80ac-9c94-d7aca142ab23"/><h2 id="2078d968-54a6-8062-84fa-e40c22643265" class="">4. å‰åç«¯åˆ†ç¦»é¡¹ç›®ä¸­æ¨èä½¿ç”¨ JWT</h2><hr id="2078d968-54a6-8028-ade0-d1bb45eadfa9"/><h3 id="2078d968-54a6-80bb-a8f6-e9768f6b43d8" class="">âœ… ä»€ä¹ˆæ˜¯ JWTï¼Ÿ</h3><p id="2078d968-54a6-80b7-a74e-fbfa4cb49a5f" class="">JWTï¼ˆJSON Web Tokenï¼‰ï¼šæ˜¯ä¸€ç§ç”¨äºå‰åç«¯é€šä¿¡æ—¶ä¿å­˜ç”¨æˆ·è®¤è¯çŠ¶æ€çš„<strong>ä»¤ç‰Œï¼ˆTokenï¼‰æœºåˆ¶</strong>ã€‚</p><p id="2078d968-54a6-8086-9ec0-c6c78e5b9600" class="">ç»“æ„å¦‚ä¸‹ï¼š</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-806d-ac6e-c0c0c207be08" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">css

xxxxx.yyyyy.zzzzz
Header.Payload.Signature

</code></pre><p id="2078d968-54a6-8087-9b38-e2577d372b70" class="">ç‰¹ç‚¹ï¼š</p><ul id="2078d968-54a6-806a-a66c-f5db7aeeb435" class="bulleted-list"><li style="list-style-type:disc">æ— éœ€ Sessionï¼ˆå‰åç«¯å®Œå…¨åˆ†ç¦»ï¼‰</li></ul><ul id="2078d968-54a6-8048-92c6-f2961dbaace1" class="bulleted-list"><li style="list-style-type:disc">ç”¨æˆ·ç™»å½•åï¼Œåç«¯ç”Ÿæˆ token è¿”å›ç»™å‰ç«¯</li></ul><ul id="2078d968-54a6-8083-86ce-d2c05073eee8" class="bulleted-list"><li style="list-style-type:disc">å‰ç«¯åç»­è¯·æ±‚æ—¶æºå¸¦ tokenï¼Œåç«¯éªŒè¯å³å¯</li></ul><hr id="2078d968-54a6-80d1-bc78-ea9a98815c39"/><h2 id="2078d968-54a6-80ae-bdfb-f19513246dd9" class="">5. å®ç° JWT ç™»å½•åŠŸèƒ½æ­¥éª¤</h2><hr id="2078d968-54a6-80d1-8612-cdd1fdcc2489"/><h3 id="2078d968-54a6-80e4-9951-f2c737135dcf" class="">âœ… æ­¥éª¤ä¸€ï¼šå¼•å…¥ JWT åº“ä¾èµ–</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8079-b328-fe1fd848f1cd" class="code"><code class="language-XML" style="white-space:pre-wrap;word-break:break-all">xml
&lt;dependency&gt;
  &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;
  &lt;artifactId&gt;jjwt&lt;/artifactId&gt;
  &lt;version&gt;0.9.1&lt;/version&gt;
&lt;/dependency&gt;

</code></pre><hr id="2078d968-54a6-805b-9a0e-c18d7b41f095"/><h3 id="2078d968-54a6-807a-9ac6-d4883fe074aa" class="">âœ…æ­¥éª¤äºŒï¼šç¼–å†™ Jwt å·¥å…·ç±»</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8064-a7b0-d4d0605f5306" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

@Component
public class JwtUtil {

    private final String SECRET_KEY = &quot;MySecretKey12345&quot;; // å»ºè®®ç”¨æ›´å¼ºå¯†é’¥

    // ç”Ÿæˆ tokenï¼ˆè®¾ç½®è¿‡æœŸæ—¶é—´ 1 å°æ—¶ï¼‰
    public String generateToken(String username) {
        return Jwts.builder()
                .setSubject(username)
                .setIssuedAt(new Date())
                .setExpiration(new Date(System.currentTimeMillis() + 60 * 60 * 1000))
                .signWith(SignatureAlgorithm.HS256, SECRET_KEY)
                .compact();
    }

    // è§£æ token è·å–ç”¨æˆ·å
    public String extractUsername(String token) {
        return Jwts.parser().setSigningKey(SECRET_KEY)
                .parseClaimsJws(token).getBody().getSubject();
    }

    // æ ¡éªŒ token æ˜¯å¦è¿‡æœŸ
    public boolean validateToken(String token) {
        try {
            Date exp = Jwts.parser().setSigningKey(SECRET_KEY)
                    .parseClaimsJws(token).getBody().getExpiration();
            return exp.after(new Date());
        } catch (Exception e) {
            return false;
        }
    }
}

</code></pre><hr id="2078d968-54a6-8022-8de5-e19b1b09ff3b"/><h3 id="2078d968-54a6-8064-bc42-d4fe9d9e6f72" class="">âœ… æ­¥éª¤ä¸‰ï¼šè‡ªå®šä¹‰ç™»å½•æ¥å£ï¼ˆä¸ä½¿ç”¨é»˜è®¤è¡¨å•ï¼‰</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-808b-804d-f971bad86900" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

@RestController
@RequestMapping(&quot;/auth&quot;)
public class AuthController {

    @Autowired
    private JwtUtil jwtUtil;

    @PostMapping(&quot;/login&quot;)
    public Result&lt;?&gt; login(@RequestBody LoginForm form) {
        if (&quot;admin&quot;.equals(form.getUsername()) &amp;&amp; &quot;123456&quot;.equals(form.getPassword())) {
            // ç™»å½•æˆåŠŸï¼Œç”Ÿæˆ Token
            String token = jwtUtil.generateToken(form.getUsername());
            return Result.success(token);
        } else {
            return Result.error(&quot;è´¦å·æˆ–å¯†ç é”™è¯¯&quot;);
        }
    }
}

</code></pre><blockquote id="2078d968-54a6-8070-9533-d53053cfec8c" class="">ğŸ“Œ å®é™…é¡¹ç›®ä¸­åº”ä»æ•°æ®åº“æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œè¿™é‡Œä¸ºäº†æ¼”ç¤ºç®€åŒ–ä¸ºé™æ€éªŒè¯ã€‚</blockquote><hr id="2078d968-54a6-80a7-9e35-f5001bb7c283"/><h3 id="2078d968-54a6-805e-93c4-e4cea8d7735e" class="">âœ… ç™»å½•è¯·æ±‚ä½“ç±» LoginForm.java</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-802e-815d-e7053683b445" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

public class LoginForm {
    private String username;
    private String password;
    // getter/setter
}

</code></pre><hr id="2078d968-54a6-801c-8916-e759644f356b"/><h3 id="2078d968-54a6-8097-a47c-e7b090468468" class="">âœ… è¿”å›å€¼ç¤ºä¾‹ï¼š</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-80e6-83e2-dc7ab3ad50ad" class="code"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">json

{
  &quot;code&quot;: 200,
  &quot;message&quot;: &quot;Success&quot;,
  &quot;data&quot;: &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6...&quot;
}

</code></pre><p id="2078d968-54a6-802f-bd32-f85d920f5a6b" class="">å‰ç«¯å°†æ­¤ token å­˜å…¥ localStorageï¼Œåœ¨æ¯æ¬¡è¯·æ±‚ä¸­ä½œä¸º Header å‘é€ï¼š</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-80b8-983b-dfe6a5e086a2" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">

Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6...

</code></pre><hr id="2078d968-54a6-8020-8765-df6e7495d4c8"/><h2 id="2078d968-54a6-8096-afd3-f57299703dae" class="">6. è®¾ç½®å®‰å…¨é…ç½®ç±» SecurityConfig</h2><hr id="2078d968-54a6-8011-830a-c9c860c46bd0"/><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8044-b64e-c57a336dbeb9" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

@Configuration
@EnableWebSecurity
public class SecurityConfig {

    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http.csrf().disable() // ç¦ç”¨ CSRF
            .authorizeHttpRequests(auth -&gt; auth
                .requestMatchers(&quot;/auth/**&quot;).permitAll() // ç™»å½•æ¥å£æ”¾è¡Œ
                .anyRequest().authenticated()
            );

        return http.build();
    }
}

</code></pre><p id="2078d968-54a6-806c-9d35-d7d3390eb180" class="">ğŸ“Œ æ›´å¤š JWT è¿‡æ»¤å™¨ + ç”¨æˆ·æ ¡éªŒæˆ‘ä»¬å°†åœ¨ä¸‹ä¸€ç« æ‰©å±•ï¼ˆå«æˆæƒï¼‰ã€‚</p><hr id="2078d968-54a6-8034-8a1a-fb0be8bc8937"/><h2 id="2078d968-54a6-802b-934b-d321ede98674" class="">ğŸ§  é¢è¯•å¼ºåŒ–é—®é¢˜</h2><hr id="2078d968-54a6-80f9-8c34-d6f4eb3b61fe"/><h3 id="2078d968-54a6-80e0-86ad-e2eb7d591b0a" class="">â“ Q1ï¼šJWT æœ‰å“ªäº›ä¼˜ç‚¹ä¸é£é™©ï¼Ÿ</h3><p id="2078d968-54a6-80d1-9976-f65ade1ec75c" class="">âœ… å›ç­”è¦ç‚¹ï¼š</p><blockquote id="2078d968-54a6-805f-96a1-f8cf0874b278" class="">ä¼˜ç‚¹ï¼š<ul id="2078d968-54a6-80e1-aec0-fe36b1b29ed2" class="bulleted-list"><li style="list-style-type:disc">æ— çŠ¶æ€ï¼šä¸ä¾èµ– Sessionï¼Œæ”¯æŒåˆ†å¸ƒå¼</li></ul><ul id="2078d968-54a6-80ce-b0ab-c20ec4b2212f" class="bulleted-list"><li style="list-style-type:disc">æ€§èƒ½å¥½ï¼šä¸éœ€é¢‘ç¹è®¿é—®æ•°æ®åº“</li></ul><p id="2078d968-54a6-805d-90c0-fba2b9214659" class="">é£é™©ï¼š</p><ul id="2078d968-54a6-80d4-bff9-d7a46e293a72" class="bulleted-list"><li style="list-style-type:disc">æ— æ³•ä¸»åŠ¨å¤±æ•ˆï¼ˆç™»å‡ºæˆ–è´¦å·å†»ç»“æ— æ³•å¼ºåˆ¶ä»¤ç‰Œå¤±æ•ˆï¼‰</li></ul><ul id="2078d968-54a6-80c4-bfcd-ebaa9b47a524" class="bulleted-list"><li style="list-style-type:disc">token æ³„æ¼é£é™©ï¼ˆéœ€é…åˆ HTTPSï¼‰</li></ul></blockquote><hr id="2078d968-54a6-8033-93f8-e139670f2404"/><h3 id="2078d968-54a6-80f2-8416-d86d010d90bf" class="">â“ Q2ï¼šSpring Security çš„è¿‡æ»¤å™¨é“¾æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h3><p id="2078d968-54a6-806b-9e58-c4d0611abbee" class="">âœ… å›ç­”è¦ç‚¹ï¼š</p><blockquote id="2078d968-54a6-80f7-a3d0-e6603f73cc50" class="">Spring Security åœ¨åº•å±‚æœ‰ä¸€å¥— FilterChainï¼ˆè¿‡æ»¤å™¨é“¾ï¼‰ï¼Œæ¯ä¸€ä¸ªè¿‡æ»¤å™¨å¤„ç†ç™»å½•ã€æˆæƒã€å¼‚å¸¸ç­‰ä¸åŒèŒè´£ï¼Œæ‰§è¡Œé¡ºåºéå¸¸ä¸¥æ ¼ã€‚ä¾‹å¦‚ï¼šUsernamePasswordAuthenticationFilter å¤„ç†ç™»å½•æ ¡éªŒï¼ŒExceptionTranslationFilter å¤„ç†å¼‚å¸¸è¿”å›ã€‚</blockquote><hr id="2078d968-54a6-80fb-8091-e45e1db87fea"/><h2 id="2078d968-54a6-80cc-9a00-d380e1c8ff78" class="">ğŸ“š å°ç»“å›é¡¾</h2><table id="2078d968-54a6-8062-abb8-ddb83c6e434c" class="simple-table"><tbody><tr id="2078d968-54a6-801e-bea5-cd3b7088a2a2"><td id="?\CR" class="">çŸ¥è¯†ç‚¹</td><td id="~?fz" class="">å†…å®¹è¯´æ˜</td></tr><tr id="2078d968-54a6-8071-9d1f-cedab3d9e3a7"><td id="?\CR" class="">è®¤è¯ vs æˆæƒ</td><td id="~?fz" class="">ç™»å½•æ ¡éªŒ vs æƒé™æ§åˆ¶</td></tr><tr id="2078d968-54a6-8064-a78a-e8ce31e9350e"><td id="?\CR" class="">Spring Security é»˜è®¤è¡Œä¸º</td><td id="~?fz" class="">å¯åŠ¨å³æ‹¦æˆªï¼Œå†…ç½®ç™»å½•è¡¨å•</td></tr><tr id="2078d968-54a6-8037-90b4-cfd4b35ae4c2"><td id="?\CR" class="">JWT ç™»å½•æœºåˆ¶</td><td id="~?fz" class="">ç”¨æˆ· â†’ ç™»å½• â†’ è¿”å› token â†’ è¯·æ±‚æºå¸¦ token</td></tr><tr id="2078d968-54a6-80ca-8080-f6c5286db07b"><td id="?\CR" class="">token æ ¡éªŒæ–¹å¼</td><td id="~?fz" class="">JwtUtil æä¾›ç”Ÿæˆ/éªŒè¯æ–¹æ³•</td></tr><tr id="2078d968-54a6-80f6-be75-f9b20cda5e2c"><td id="?\CR" class="">å®‰å…¨é…ç½®ç±»</td><td id="~?fz" class="">è‡ªå®šä¹‰æ”¾è¡Œæ¥å£ã€å®‰å…¨ç­–ç•¥ã€ç¦ç”¨è¡¨å•ç™»å½•</td></tr></tbody></table><p id="2078d968-54a6-8075-a3ae-f29aeec0eb7d" class="">
</p><p id="2078d968-54a6-80bd-aeb4-fe2128eef981" class="">
</p><p id="2078d968-54a6-8002-98b9-cdd683aa3265" class="">
</p><p id="2078d968-54a6-803c-b5fb-f2b452f4d2fa" class="">
</p><p id="2078d968-54a6-803a-9b4d-c933a217c7e3" class="">
</p><h1 id="s10" class="">ç¬¬10ç« ï¼šSpring Security JWT è¿›é˜¶ â€” ç™»å½•æ‹¦æˆªå™¨ä¸æƒé™æ§åˆ¶å®ç°</h1><blockquote id="2078d968-54a6-8032-9e85-dc29c3c56ba8" class="">âœ… æœ¬ç« ç›®æ ‡ï¼š<ul id="2078d968-54a6-8034-90df-f10527952e1b" class="bulleted-list"><li style="list-style-type:disc">åˆ©ç”¨ JWT å®ç°ç™»å½•åçš„èº«ä»½è¯†åˆ«</li></ul><ul id="2078d968-54a6-8013-a60e-fcbaa174f838" class="bulleted-list"><li style="list-style-type:disc">è‡ªå®šä¹‰æ‹¦æˆªå™¨ï¼Œåœ¨è¯·æ±‚è¿›å…¥ Controller å‰å®Œæˆ token æ ¡éªŒ</li></ul><ul id="2078d968-54a6-8049-9352-ed026694be48" class="bulleted-list"><li style="list-style-type:disc">å°†ç”¨æˆ·ä¿¡æ¯å†™å…¥ä¸Šä¸‹æ–‡ï¼Œä¾¿äºæƒé™æ§åˆ¶</li></ul><ul id="2078d968-54a6-80d1-82b7-d77f985f5932" class="bulleted-list"><li style="list-style-type:disc">å®ç°æ¥å£çº§åˆ«çš„æƒé™æ‹¦æˆªï¼ˆè§’è‰²æ§åˆ¶ï¼‰</li></ul><ul id="2078d968-54a6-806b-ad60-c378fc0b9563" class="bulleted-list"><li style="list-style-type:disc">ğŸŒŸ è¡¥å……é¢è¯•é—®é¢˜ + æƒé™è®¾è®¡å®è·µæŠ€å·§</li></ul><ul id="2078d968-54a6-804b-a38e-c27638a813f6" class="bulleted-list"><li style="list-style-type:disc">ğŸ“Œ å…¨éƒ¨ä»£ç å«æ³¨é‡Šï¼Œç¡®ä¿æµç¨‹æ¸…æ™°æ˜“æ‡‚</li></ul></blockquote><hr id="2078d968-54a6-80d0-ba7a-f6bf166a33d6"/><h2 id="2078d968-54a6-8066-b081-d26a5a7eb8ad" class="">1. å›é¡¾ JWT ç™»å½•æµç¨‹</h2><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-80fa-91e6-e820b97acfac" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">
ç”¨æˆ·ç™»å½•  â†’ åç«¯ç”Ÿæˆ JWT â†’ å‰ç«¯ä¿å­˜ Token â†’ æ¯æ¬¡è¯·æ±‚æºå¸¦ Token â†’ åç«¯æ‹¦æˆªå™¨æ ¡éªŒ Token

</code></pre><p id="2078d968-54a6-809e-8b95-dc6f3523fdce" class="">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¡¥å……â€œåç«¯æ‹¦æˆªå™¨æ ¡éªŒ + æƒé™æ§åˆ¶â€ä¸¤ä¸ªå…³é”®ç¯èŠ‚ã€‚</p><hr id="2078d968-54a6-8001-9b80-d69c08f85a20"/><h2 id="2078d968-54a6-8096-9763-ff02ffc2fb1d" class="">2. ç¼–å†™ JWT æ‹¦æˆªå™¨ï¼ˆè¿‡æ»¤å™¨ï¼‰</h2><hr id="2078d968-54a6-8085-8263-d051f309baa5"/><h3 id="2078d968-54a6-80c4-a8c4-eca0b5a6b51a" class="">âœ… æ­¥éª¤ä¸€ï¼šå®šä¹‰ JwtFilter</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8093-b8fe-fef4489d9199" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

@Component
public class JwtFilter extends OncePerRequestFilter {

    @Autowired
    private JwtUtil jwtUtil;

    @Override
    protected void doFilterInternal(HttpServletRequest request,
                                    HttpServletResponse response,
                                    FilterChain filterChain) throws ServletException, IOException {

        // ä» Header ä¸­å–å‡º token
        String authHeader = request.getHeader(&quot;Authorization&quot;);

        // åˆ¤æ–­ token æ˜¯å¦å­˜åœ¨ä¸”ç¬¦åˆæ ¼å¼
        if (authHeader != null &amp;&amp; authHeader.startsWith(&quot;Bearer &quot;)) {
            String token = authHeader.substring(7); // å»æ‰ &quot;Bearer &quot;

            String username = jwtUtil.extractUsername(token);

            // éªŒè¯ token åˆæ³•æ€§ &amp; è®¾ç½®è®¤è¯ä¸Šä¸‹æ–‡
            if (username != null &amp;&amp; jwtUtil.validateToken(token)) {
                // æ¨¡æ‹Ÿåˆ›å»ºè®¤è¯ä¿¡æ¯ï¼ˆå®é™…åº”ä»æ•°æ®åº“æŸ¥æƒé™ï¼‰
                UsernamePasswordAuthenticationToken authentication =
                        new UsernamePasswordAuthenticationToken(
                                username, null, Collections.emptyList());

                // å†™å…¥ä¸Šä¸‹æ–‡ï¼ˆSecurityContextï¼‰
                SecurityContextHolder.getContext().setAuthentication(authentication);
            }
        }

        filterChain.doFilter(request, response); // æ”¾è¡Œè¯·æ±‚
    }
}

</code></pre><blockquote id="2078d968-54a6-8003-916b-f526b9ffd23a" class="">ğŸ“Œ OncePerRequestFilter ä¿è¯è¿‡æ»¤å™¨æ¯æ¬¡è¯·æ±‚åªè°ƒç”¨ä¸€æ¬¡ã€‚</blockquote><hr id="2078d968-54a6-803a-8214-d93c26f36dc3"/><h2 id="2078d968-54a6-806b-b7db-e6968a006d81" class="">3. ä¿®æ”¹ Security é…ç½®ç±»ï¼ˆåŠ è½½æ‹¦æˆªå™¨ï¼‰</h2><hr id="2078d968-54a6-80af-a738-f6cb48a38ce9"/><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-80e8-8eef-ca71a3158735" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

@Configuration
@EnableWebSecurity
public class SecurityConfig {

    @Autowired
    private JwtFilter jwtFilter;

    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http.csrf().disable() // ç¦ç”¨ CSRFï¼ˆå‰åç«¯åˆ†ç¦»ä¸éœ€è¦ï¼‰
            .authorizeHttpRequests(auth -&gt; auth
                .requestMatchers(&quot;/auth/**&quot;).permitAll() // ç™»å½•æ¥å£æ”¾è¡Œ
                .anyRequest().authenticated()
            );

        // æ·»åŠ  JWT è¿‡æ»¤å™¨ï¼ˆåœ¨ UsernamePasswordAuthenticationFilter ä¹‹å‰ï¼‰
        http.addFilterBefore(jwtFilter, UsernamePasswordAuthenticationFilter.class);

        return http.build();
    }
}

</code></pre><hr id="2078d968-54a6-8085-b083-cb696d0934b4"/><h2 id="2078d968-54a6-801b-bfac-eb9efde7d0d7" class="">âœ… 4. Controller ä¸­è·å–å½“å‰ç™»å½•ç”¨æˆ·</h2><hr id="2078d968-54a6-8063-ac45-e48c724b9a9f"/><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8031-a706-eee5e606d395" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java
å¤åˆ¶ç¼–è¾‘
@GetMapping(&quot;/me&quot;)
public Result&lt;?&gt; getCurrentUser() {
    // ä»ä¸Šä¸‹æ–‡ä¸­è·å–ç”¨æˆ·ä¿¡æ¯
    Authentication auth = SecurityContextHolder.getContext().getAuthentication();
    String username = auth.getName(); // è·å–ç”¨æˆ·å
    return Result.success(&quot;å½“å‰ç”¨æˆ·ï¼š&quot; + username);
}

</code></pre><hr id="2078d968-54a6-80e9-a90b-c65cf48172af"/><h2 id="2078d968-54a6-8088-a57d-f2493ffcd7b2" class="">5. å®ç°æ¥å£çº§åˆ«çš„æƒé™æ§åˆ¶ï¼ˆåŸºäºè§’è‰²ï¼‰</h2><hr id="2078d968-54a6-8054-8ce2-f92115bed7c9"/><h3 id="2078d968-54a6-80c2-889b-f53461a2c91e" class="">æ¨¡æ‹Ÿï¼šä¸ºä¸åŒç”¨æˆ·åˆ†é…è§’è‰²ï¼ˆå®é™…åº”æŸ¥æ•°æ®åº“ï¼‰</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8087-b2a7-d127faa88e1b" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

List&lt;GrantedAuthority&gt; authorities = AuthorityUtils.createAuthorityList(&quot;ROLE_ADMIN&quot;);
UsernamePasswordAuthenticationToken authentication =
        new UsernamePasswordAuthenticationToken(username, null, authorities);

</code></pre><hr id="2078d968-54a6-806c-b157-c59211eadf55"/><h3 id="2078d968-54a6-80fe-a737-e9076e13ef7a" class="">ä½¿ç”¨æƒé™æ³¨è§£ï¼š</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-80cc-8307-e903e6c9b6d4" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

@PreAuthorize(&quot;hasRole(&#x27;ADMIN&#x27;)&quot;)
@GetMapping(&quot;/admin&quot;)
public Result&lt;?&gt; adminOnly() {
    return Result.success(&quot;ç®¡ç†å‘˜æƒé™è®¿é—®æˆåŠŸ&quot;);
}

å¯ç”¨æ–¹æ³•çº§åˆ«æƒé™æ ¡éªŒï¼š</code></pre><hr id="2078d968-54a6-8081-9bd0-c3ee283720f1"/><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-80b3-b407-f7eefb629f04" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

@EnableMethodSecurity // æ›¿ä»£è€ç‰ˆæœ¬çš„ @EnableGlobalMethodSecurity
@Configuration
public class MethodSecurityConfig {
}

</code></pre><hr id="2078d968-54a6-8067-858e-fa519a29d087"/><h2 id="2078d968-54a6-80d6-92b5-e7625369a301" class="">ğŸ¯ å®æˆ˜æµç¨‹æ¼”ç»ƒæ€»ç»“</h2><table id="2078d968-54a6-80ed-b660-c49e23b6c10a" class="simple-table"><tbody><tr id="2078d968-54a6-80c9-97e8-f70b6829eef9"><td id="BIN@" class="">æ­¥éª¤</td><td id="m}[?" class="">å†…å®¹è¯´æ˜</td></tr><tr id="2078d968-54a6-8039-9ce1-f0a1c6d13426"><td id="BIN@" class="">ç”¨æˆ·ç™»å½•</td><td id="m}[?" class="">è¿”å› JWT token</td></tr><tr id="2078d968-54a6-8085-88a8-f6bad0ca2c33"><td id="BIN@" class="">è¯·æ±‚æºå¸¦ token</td><td id="m}[?" class="">æ”¾å…¥ Headerï¼šAuthorization: Bearer xxx</td></tr><tr id="2078d968-54a6-80bc-ad3d-f29496d3a433"><td id="BIN@" class="">JwtFilter æ‹¦æˆªå™¨è§£æ token</td><td id="m}[?" class="">éªŒè¯åˆæ³•æ€§å¹¶å†™å…¥ä¸Šä¸‹æ–‡</td></tr><tr id="2078d968-54a6-805c-a1ce-eef8be559e6a"><td id="BIN@" class="">Controller è·å–è®¤è¯ä¿¡æ¯</td><td id="m}[?" class="">ä» SecurityContext ä¸­è¯»å–</td></tr><tr id="2078d968-54a6-80d5-8792-e8e3f46b042c"><td id="BIN@" class="">æ–¹æ³•æƒé™æ§åˆ¶</td><td id="m}[?" class="">ç”¨ <code>@PreAuthorize</code> æ‹¦æˆªéç®¡ç†å‘˜</td></tr></tbody></table><hr id="2078d968-54a6-8006-b5dc-f045a3e734a4"/><h2 id="2078d968-54a6-80e1-8c59-fe066628339e" class="">ğŸ§  é¢è¯•å¼ºåŒ–é—®é¢˜æ±‡æ€»</h2><hr id="2078d968-54a6-8005-9e1f-d741f0d69b8a"/><h3 id="2078d968-54a6-80b1-a00f-f733dd8db745" class="">â“ Q1ï¼šå¦‚ä½•åœ¨ Spring Boot é¡¹ç›®ä¸­å®ç° JWT ç™»å½•è®¤è¯ï¼Ÿ</h3><p id="2078d968-54a6-80d2-a074-c05250714b34" class="">âœ… å›ç­”è¦ç‚¹ï¼š</p><blockquote id="2078d968-54a6-8079-9f4e-d403157151eb" class="">è‡ªå®šä¹‰ç™»å½•æ¥å£ç”Ÿæˆ JWTï¼Œä½¿ç”¨æ‹¦æˆªå™¨ä» Header ä¸­è¯»å–å¹¶éªŒè¯ tokenï¼Œè§£æåå†™å…¥ SecurityContextï¼Œä»è€Œå®ç°æ—  Session çš„ç”¨æˆ·èº«ä»½è¯†åˆ«ã€‚</blockquote><hr id="2078d968-54a6-8072-b48c-d782b3ec01de"/><h3 id="2078d968-54a6-80e4-9d7a-e9315ac0a8e3" class="">â“ Q2ï¼šSpring Security å¦‚ä½•å®ç°æ¥å£æƒé™æ§åˆ¶ï¼Ÿ</h3><p id="2078d968-54a6-8076-8542-c4b7695def45" class="">âœ… å›ç­”è¦ç‚¹ï¼š</p><blockquote id="2078d968-54a6-804f-b39f-e9512de2a1d6" class="">é€šè¿‡æ–¹æ³•æ³¨è§£ @PreAuthorizeï¼Œç»“åˆç”¨æˆ·æ‹¥æœ‰çš„è§’è‰²åˆ—è¡¨ï¼ˆå¦‚ ROLE_ADMINï¼‰è¿›è¡Œæ‹¦æˆªæ§åˆ¶ï¼›é…åˆæ‹¦æˆªå™¨æå‰éªŒè¯å¹¶æ³¨å…¥æƒé™ä¿¡æ¯ã€‚</blockquote><hr id="2078d968-54a6-80e4-b900-e2d7d39edd39"/><h3 id="2078d968-54a6-8075-b48a-e2e3c3befd79" class="">â“ Q3ï¼šSpring Security ä¸­ Authentication å’Œ SecurityContext æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h3><p id="2078d968-54a6-80be-8359-d4c751a6a1fc" class="">âœ… å›ç­”è¦ç‚¹ï¼š</p><blockquote id="2078d968-54a6-8007-b361-eeee5822d929" class="">Authentication æ˜¯ç”¨æˆ·èº«ä»½ä¿¡æ¯å¯¹è±¡ï¼ŒåŒ…å«ç”¨æˆ·åã€æƒé™ç­‰ï¼›SecurityContext æ˜¯ä¿å­˜ Authentication çš„ä¸Šä¸‹æ–‡å®¹å™¨ï¼Œç³»ç»Ÿé€šè¿‡å®ƒè¯†åˆ«å½“å‰ç™»å½•ç”¨æˆ·ã€‚</blockquote><hr id="2078d968-54a6-809c-9724-d233a0c6ed40"/><h2 id="2078d968-54a6-80be-a7e3-e77b48528030" class="">ğŸ“š å°ç»“å¤ç›˜</h2><table id="2078d968-54a6-809d-8141-f57ea308d55a" class="simple-table"><tbody><tr id="2078d968-54a6-8083-9791-f75436baa03f"><td id="Up&lt;k" class="">çŸ¥è¯†ç‚¹</td><td id="joQ&lt;" class="">è¯´æ˜</td></tr><tr id="2078d968-54a6-80d8-b958-f558f526a6ee"><td id="Up&lt;k" class="">JwtFilter</td><td id="joQ&lt;" class="">åœ¨è¯·æ±‚ä¹‹å‰è§£æ token å¹¶å†™å…¥ç”¨æˆ·èº«ä»½</td></tr><tr id="2078d968-54a6-809e-970e-c74e0aec0c67"><td id="Up&lt;k" class="">SecurityContextHolder</td><td id="joQ&lt;" class="">å­˜æ”¾è®¤è¯åçš„ç”¨æˆ·ä¿¡æ¯</td></tr><tr id="2078d968-54a6-8010-8746-e95e6a1a7b53"><td id="Up&lt;k" class=""><code>@PreAuthorize</code></td><td id="joQ&lt;" class="">æ¥å£çº§åˆ«çš„æƒé™æ§åˆ¶æ³¨è§£</td></tr><tr id="2078d968-54a6-80bb-a09d-c30450b455a6"><td id="Up&lt;k" class="">AuthorityUtils å·¥å…·</td><td id="joQ&lt;" class="">åˆ›å»ºè§’è‰²åˆ—è¡¨ï¼ˆæ¨¡æ‹Ÿè§’è‰²ï¼‰</td></tr><tr id="2078d968-54a6-8094-91e4-cf217d165cdb"><td id="Up&lt;k" class="">æ–¹æ³•å®‰å…¨é…ç½®</td><td id="joQ&lt;" class="">ä½¿ç”¨ <code>@EnableMethodSecurity</code> å¯ç”¨æ³¨è§£æ§åˆ¶</td></tr><tr id="2078d968-54a6-80ea-be01-f0e96a6bee36"><td id="Up&lt;k" class="">æ‹¦æˆªé¡ºåº</td><td id="joQ&lt;" class="">JWT æ‹¦æˆªå™¨åº”æ·»åŠ åœ¨é»˜è®¤è®¤è¯è¿‡æ»¤å™¨ä¹‹å‰</td></tr></tbody></table><p id="2078d968-54a6-80bb-ad87-fb59c0145056" class="">
</p><p id="2078d968-54a6-804f-9325-cd2b75b1dd70" class="">
</p><p id="2078d968-54a6-807a-a84f-c3fc15a3651b" class="">
</p><p id="2078d968-54a6-8023-b16a-e2ee66d80c92" class="">
</p><p id="2078d968-54a6-80ee-8b16-f4dd7ddd2efa" class="">
</p><h1 id="s11" class="">ç¬¬11ç« ï¼šæ¥å£æ–‡æ¡£ç”Ÿæˆä¸å¯è§†åŒ–å±•ç¤ºï¼ˆSwagger 3 / OpenAPI 3 é›†æˆï¼‰</h1><blockquote id="2078d968-54a6-80be-b25a-f0a04de1baf8" class="">âœ… æœ¬ç« ç›®æ ‡ï¼š<ul id="2078d968-54a6-8024-9d02-db07225b804a" class="bulleted-list"><li style="list-style-type:disc">ä½¿ç”¨ Swagger è‡ªåŠ¨ç”Ÿæˆ REST API æ–‡æ¡£</li></ul><ul id="2078d968-54a6-8062-9fcc-de5b4c8ce294" class="bulleted-list"><li style="list-style-type:disc">æ”¯æŒæ¥å£åˆ†ç»„ã€å‚æ•°è¯´æ˜ã€ç¤ºä¾‹æ•°æ®å±•ç¤º</li></ul><ul id="2078d968-54a6-80de-9732-f199e3db779b" class="bulleted-list"><li style="list-style-type:disc">é€šè¿‡ç½‘é¡µè°ƒè¯•æ¥å£ï¼Œæé«˜å¼€å‘/æµ‹è¯•æ•ˆç‡</li></ul><ul id="2078d968-54a6-80c2-af5d-c3d317022e0a" class="bulleted-list"><li style="list-style-type:disc">ğŸŒŸ è¡¥å…… Swagger ä½¿ç”¨å»ºè®® + é¢è¯•é—®é¢˜</li></ul><ul id="2078d968-54a6-8042-8e58-fbbd9a5c9afc" class="bulleted-list"><li style="list-style-type:disc">ğŸ“Œ å…¨ä»£ç é…æ³¨é‡Šï¼Œç¡®ä¿ä»é›†æˆåˆ°ä½¿ç”¨å…¨æµç¨‹æŒæ¡</li></ul></blockquote><hr id="2078d968-54a6-8074-ba6d-d04cb54b0fc8"/><h2 id="2078d968-54a6-80c6-8972-ea7a732d2c97" class="">1. ä»€ä¹ˆæ˜¯ Swagger / OpenAPIï¼Ÿ</h2><ul id="2078d968-54a6-80b4-9179-ffabdb7e29f9" class="bulleted-list"><li style="list-style-type:disc"><strong>Swagger</strong> æ˜¯ç”¨äºè‡ªåŠ¨ç”Ÿæˆ Web API æ–‡æ¡£çš„å·¥å…·</li></ul><ul id="2078d968-54a6-808d-a022-e45ea6452070" class="bulleted-list"><li style="list-style-type:disc"><strong>OpenAPI 3.0</strong> æ˜¯ Swagger åç»­å‘å±•å½¢æˆçš„è§„èŒƒ</li></ul><ul id="2078d968-54a6-805c-81dd-dc38437204e2" class="bulleted-list"><li style="list-style-type:disc">Spring Boot æ¨èä½¿ç”¨ <strong>springdoc-openapi</strong> å®ç° Swagger 3 æ•´åˆ</li></ul><p id="2078d968-54a6-8011-b059-d987b25efbe3" class="">ğŸ“Œ æ–‡æ¡£é¡µé¢åœ°å€é»˜è®¤æ˜¯ï¼š</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-806c-91db-d65be07a6b76" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">bash

http://localhost:8080/swagger-ui/index.html

</code></pre><hr id="2078d968-54a6-80ec-97ca-c1c6fe1d88dd"/><h2 id="2078d968-54a6-8031-b95a-c309142ab88a" class="">2. æ·»åŠ  Swagger ä¾èµ–ï¼ˆSpringdoc OpenAPI æ–¹å¼ï¼‰</h2><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8005-9c2b-c05c3f3d5e12" class="code"><code class="language-XML" style="white-space:pre-wrap;word-break:break-all">xml

&lt;dependency&gt;
  &lt;groupId&gt;org.springdoc&lt;/groupId&gt;
  &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;
  &lt;version&gt;2.2.0&lt;/version&gt;
&lt;/dependency&gt;

</code></pre><p id="2078d968-54a6-80d9-9222-c263931292a5" class="">âœ… ç‰ˆæœ¬æ¨èï¼š2.x æ”¯æŒ Spring Boot 3 ä»¥ä¸Šç‰ˆæœ¬ï¼ˆè¾ƒæ–°ï¼‰</p><hr id="2078d968-54a6-8035-9f17-ee54d926f896"/><h2 id="2078d968-54a6-80e9-ada8-f07c9a7ecbdc" class="">3. é…ç½®æ–‡æ¡£ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰</h2><p id="2078d968-54a6-8070-b64b-d672e9af99ef" class="">åœ¨ <code>application.yml</code> ä¸­æ·»åŠ ï¼š</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8073-b8c0-cd0a42b4fd9c" class="code"><code class="language-YAML" style="white-space:pre-wrap;word-break:break-all">yaml

springdoc:
  api-docs:
    path: /v3/api-docs
  swagger-ui:
    path: /swagger-ui.html
    operationsSorter: method
    tagsSorter: alpha

</code></pre><blockquote id="2078d968-54a6-80d4-8bf4-f87afa89c627" class="">api-docs æ˜¯åç«¯æ¥å£ JSON æ•°æ®çš„è·¯å¾„ï¼Œswagger-ui.html æ˜¯æ–‡æ¡£é¡µé¢åœ°å€ã€‚</blockquote><hr id="2078d968-54a6-801d-a6f0-e58fde932884"/><h2 id="2078d968-54a6-806f-826e-e2599fbfabe6" class="">4. ç¼–å†™æ¥å£ + æ³¨é‡Šæ–‡æ¡£</h2><hr id="2078d968-54a6-804e-be5e-c108403657e6"/><h3 id="2078d968-54a6-80d1-9e0e-cb57d23a22c5" class="">âœ… ç¤ºä¾‹å®ä½“ç±»ï¼š</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8091-a0a4-e3ac56d58137" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">

import io.swagger.v3.oas.annotations.media.Schema;

@Schema(description = &quot;ç”¨æˆ·ä¿¡æ¯&quot;)
public class User {

    @Schema(description = &quot;ç”¨æˆ·ID&quot;, example = &quot;1001&quot;)
    private Long id;

    @Schema(description = &quot;ç”¨æˆ·å&quot;, example = &quot;å¼ ä¸‰&quot;)
    private String name;

    @Schema(description = &quot;é‚®ç®±&quot;, example = &quot;user@example.com&quot;)
    private String email;

    // getter / setter
}

</code></pre><hr id="2078d968-54a6-8082-8662-f4f022af390b"/><h3 id="2078d968-54a6-805d-be2c-f1a5351f7260" class="">âœ… ç¤ºä¾‹æ§åˆ¶å™¨ï¼š</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-80d6-acec-d69d9113dc99" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

@RestController
@RequestMapping(&quot;/api/user&quot;)
@Tag(name = &quot;ç”¨æˆ·æ¥å£&quot;, description = &quot;ç”¨æˆ·ç›¸å…³æ¥å£&quot;)
public class UserController {

    @Operation(summary = &quot;æ–°å¢ç”¨æˆ·&quot;)
    @PostMapping(&quot;/add&quot;)
    public Result&lt;?&gt; addUser(@RequestBody User user) {
        return Result.success(&quot;æ·»åŠ æˆåŠŸ&quot;);
    }

    @Operation(summary = &quot;è·å–ç”¨æˆ·åˆ—è¡¨&quot;)
    @GetMapping(&quot;/list&quot;)
    public Result&lt;List&lt;User&gt;&gt; getList() {
        return Result.success(new ArrayList&lt;&gt;());
    }
}

</code></pre><p id="2078d968-54a6-800b-9060-c29fdb5d1f7f" class="">ğŸ“Œ å¸¸ç”¨æ³¨è§£æ±‡æ€»ï¼š</p><table id="2078d968-54a6-8072-9665-c06de555b627" class="simple-table"><tbody><tr id="2078d968-54a6-8035-831d-e86736b92310"><td id="cvwg" class="">æ³¨è§£</td><td id="H`g@" class="">è¯´æ˜</td></tr><tr id="2078d968-54a6-80c5-aed9-cf9ac969829d"><td id="cvwg" class=""><code>@Tag</code></td><td id="H`g@" class="">æ§åˆ¶å™¨åˆ†ç±»æ ‡ç­¾</td></tr><tr id="2078d968-54a6-80dd-a1f4-f636cd6201a2"><td id="cvwg" class=""><code>@Operation(summary = &quot;...&quot;)</code></td><td id="H`g@" class="">æè¿°æ¥å£ç”¨é€”</td></tr><tr id="2078d968-54a6-804c-96ff-eaf282492be5"><td id="cvwg" class=""><code>@Schema(description=...)</code></td><td id="H`g@" class="">ç»™ç±»ã€å­—æ®µåŠ æ³¨é‡Š</td></tr><tr id="2078d968-54a6-8049-a39b-faa8b3cc32f8"><td id="cvwg" class=""><code>@Parameter(...)</code></td><td id="H`g@" class="">è‡ªå®šä¹‰å•ä¸ªå‚æ•°è¯´æ˜</td></tr></tbody></table><hr id="2078d968-54a6-80ee-94af-fb72017fe838"/><h2 id="2078d968-54a6-80e7-b86c-f230c0445c17" class="">5. å¯åŠ¨é¡¹ç›®å¹¶è®¿é—®æ–‡æ¡£é¡µé¢</h2><p id="2078d968-54a6-80cf-930a-efc60f52b064" class="">å¯åŠ¨ Spring Boot é¡¹ç›®åï¼Œè®¿é—®ï¼š</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-80d3-92b7-cb210e50a8f0" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">bash

http://localhost:8080/swagger-ui/index.html

</code></pre><p id="2078d968-54a6-80e9-bc8e-f0b3564c888a" class="">æ•ˆæœå¦‚ä¸‹ï¼š</p><ul id="2078d968-54a6-809e-949b-dcf97e520ac1" class="bulleted-list"><li style="list-style-type:disc">æ‰€æœ‰æ¥å£è‡ªåŠ¨å±•ç¤º</li></ul><ul id="2078d968-54a6-80f8-bf1b-e59763af9162" class="bulleted-list"><li style="list-style-type:disc">è¯·æ±‚æ–¹å¼é¢œè‰²åŒºåˆ†ï¼ˆGETã€POSTï¼‰</li></ul><ul id="2078d968-54a6-8047-b31f-ce3ea8535f9f" class="bulleted-list"><li style="list-style-type:disc">æ”¯æŒåœ¨çº¿è°ƒè¯•ã€è¯·æ±‚å‚æ•°å¡«å†™ã€å“åº”ç¤ºä¾‹æŸ¥çœ‹</li></ul><hr id="2078d968-54a6-80df-aa3a-dd3258d61ffa"/><h2 id="2078d968-54a6-80d9-8b0b-d388fa9ddaad" class="">6. åˆ†ç»„æ˜¾ç¤ºå¤šä¸ªæ¨¡å—æ¥å£ï¼ˆå¯é€‰ï¼‰</h2><p id="2078d968-54a6-80de-98b3-d2a8c6506b2f" class="">è‹¥é¡¹ç›®ä¸­æœ‰å¤šä¸ªæ¨¡å—ï¼Œå¯é€šè¿‡ <code>@OpenAPIDefinition</code> è®¾ç½®åˆ†ç»„ï¼š</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8085-82ef-ebba2f294b49" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java
@OpenAPIDefinition(
    info = @Info(title = &quot;ç”¨æˆ·ç®¡ç† API&quot;, version = &quot;v1&quot;),
    servers = @Server(url = &quot;http://localhost:8080&quot;)
)
@Configuration
public class SwaggerConfig {}

</code></pre><hr id="2078d968-54a6-805a-9ad9-f9c9d2eb6a2d"/><h2 id="2078d968-54a6-8055-992f-e43b492d858b" class="">ğŸ§  é¢è¯•å¼ºåŒ–é—®é¢˜</h2><hr id="2078d968-54a6-8027-8501-ed519843c0c3"/><h3 id="2078d968-54a6-807e-ae68-f01f20ff538e" class="">â“ Q1ï¼šä½ ä»¬é¡¹ç›®ä¸­å¦‚ä½•ç®¡ç† API æ¥å£æ–‡æ¡£ï¼Ÿ</h3><p id="2078d968-54a6-80d9-b3dc-c23ca3c3721f" class="">âœ… å›ç­”è¦ç‚¹ï¼š</p><blockquote id="2078d968-54a6-80ac-926b-dff30d279e96" class="">æˆ‘ä»¬ä½¿ç”¨ Swagger + OpenAPI è‡ªåŠ¨ç”Ÿæˆæ¥å£æ–‡æ¡£ï¼Œå¼€å‘é˜¶æ®µæ”¯æŒå¯è§†åŒ–è°ƒè¯•ï¼Œéƒ¨ç½²æ—¶å¯éšè—æ–‡æ¡£é¡µé˜²æ­¢æ³„éœ²ï¼Œå¢å¼ºäº†å‰åç«¯åä½œæ•ˆç‡ä¸è§„èŒƒæ€§ã€‚</blockquote><hr id="2078d968-54a6-80be-986c-c93f98dce114"/><h3 id="2078d968-54a6-80b1-a1ae-d28f0025c921" class="">â“ Q2ï¼šSwagger ä¸ Postman çš„åŒºåˆ«ï¼Ÿ</h3><p id="2078d968-54a6-80d9-af44-d4fa7e853c0b" class="">âœ… å›ç­”è¦ç‚¹ï¼š</p><blockquote id="2078d968-54a6-80b7-a95c-f3e820885568" class="">Swagger æ˜¯åœ¨çº¿ API æ–‡æ¡£ç”Ÿæˆå·¥å…·ï¼Œé›†æˆåœ¨é¡¹ç›®ä¸­ï¼›Postman æ˜¯å®¢æˆ·ç«¯è¯·æ±‚æµ‹è¯•å·¥å…·ã€‚Swagger æ›´é€‚åˆå‰åç«¯åä½œï¼ŒPostman æ›´é€‚åˆè°ƒè¯•å’Œæ‰¹é‡æµ‹è¯•ã€‚</blockquote><hr id="2078d968-54a6-80cc-9dfe-d49eab4a6512"/><h3 id="2078d968-54a6-80d6-92d4-c985b01e9223" class="">â“ Q3ï¼šä½ å¦‚ä½•ä¿æŠ¤ Swagger æ¥å£æ–‡æ¡£ä¸æš´éœ²ç»™ç”Ÿäº§ç”¨æˆ·ï¼Ÿ</h3><p id="2078d968-54a6-800c-a7bc-fa9b3489f02b" class="">âœ… æ‹“å±•å»ºè®®ï¼š</p><blockquote id="2078d968-54a6-800c-89a9-dc96d0e83f79" class="">ç”Ÿäº§ç¯å¢ƒä¸å¼•å…¥ Swagger ä¾èµ–æˆ–è€…ä½¿ç”¨ Spring Security é™åˆ¶ /swagger-ui/** è·¯å¾„å¯é€šè¿‡ profile é…ç½® springdoc.enabled=false ç¦ç”¨æ–‡æ¡£åŠŸèƒ½</blockquote><hr id="2078d968-54a6-8049-99bf-d47af70c2e0b"/><h2 id="2078d968-54a6-80a3-88d7-fd3854512911" class="">ğŸ“š å°ç»“å›é¡¾</h2><table id="2078d968-54a6-80d2-9e51-d47190f30c33" class="simple-table"><tbody><tr id="2078d968-54a6-801a-a03a-d6ce48368a70"><td id="LDOf" class="">çŸ¥è¯†ç‚¹</td><td id="a[`F" class="">å†…å®¹è¯´æ˜</td></tr><tr id="2078d968-54a6-8011-bfd3-f39d828eaf71"><td id="LDOf" class="">Swagger å·¥å…·</td><td id="a[`F" class="">è‡ªåŠ¨ç”Ÿæˆ Web æ¥å£æ–‡æ¡£ + å¯è§†åŒ–è°ƒè¯•</td></tr><tr id="2078d968-54a6-802a-948e-d5f9a1fa727f"><td id="LDOf" class="">æ¨èä½¿ç”¨ springdoc-openapi</td><td id="a[`F" class="">å…¼å®¹ Spring Boot 3ï¼ŒåŠŸèƒ½å¼ºå¤§</td></tr><tr id="2078d968-54a6-8096-8660-e7a6385e6855"><td id="LDOf" class="">å¸¸ç”¨æ³¨è§£</td><td id="a[`F" class=""><code>@Operation</code>, <code>@Schema</code>, <code>@Tag</code> ç­‰</td></tr><tr id="2078d968-54a6-800b-9ab2-fc636dad9ffc"><td id="LDOf" class="">æ–‡æ¡£è·¯å¾„</td><td id="a[`F" class=""><code>/swagger-ui/index.html</code></td></tr><tr id="2078d968-54a6-80d4-b065-c48447017382"><td id="LDOf" class="">å®‰å…¨å»ºè®®</td><td id="a[`F" class="">ç”Ÿäº§ç¯å¢ƒåº”éšè—æ–‡æ¡£å…¥å£ï¼Œé¿å…æ¥å£æš´éœ²</td></tr></tbody></table><p id="2078d968-54a6-80a2-a89f-fe4e6a9f3f51" class="">
</p><p id="2078d968-54a6-80e9-9722-c778bc89a24d" class="">
</p><p id="2078d968-54a6-80ed-a583-e0824c4b9c1a" class="">
</p><p id="2078d968-54a6-8084-a17e-f7dd1fe7abbd" class="">
</p><p id="2078d968-54a6-80ae-b8bb-dcdfc3ba7d67" class="">
</p><h1 id="s12" class="">ç¬¬12ç« ï¼šæ—¥å¿—ç³»ç»Ÿé…ç½®ä¸é¡¹ç›®ç›‘æ§ï¼ˆLogback + Spring Boot Actuatorï¼‰</h1><blockquote id="2078d968-54a6-8089-b201-f4f1433d6209" class="">âœ… æœ¬ç« ç›®æ ‡ï¼š<ul id="2078d968-54a6-80a0-ae6a-c4b19833d9ac" class="bulleted-list"><li style="list-style-type:disc">é…ç½®æ—¥å¿—ç³»ç»Ÿï¼ŒåŒºåˆ†è¾“å‡ºçº§åˆ«ï¼ˆinfo/warn/errorï¼‰</li></ul><ul id="2078d968-54a6-801c-a134-e616b18e3761" class="bulleted-list"><li style="list-style-type:disc">è‡ªå®šä¹‰æ—¥å¿—æ ¼å¼ï¼ˆæ§åˆ¶å° + æ–‡ä»¶ï¼‰</li></ul><ul id="2078d968-54a6-808b-bbaa-d8f804a42079" class="bulleted-list"><li style="list-style-type:disc">ä½¿ç”¨ Spring Boot Actuator å®ç°è¿è¡ŒçŠ¶æ€ä¸å¥åº·æ£€æŸ¥</li></ul><ul id="2078d968-54a6-807e-8029-e8d7e5f52c93" class="bulleted-list"><li style="list-style-type:disc">ğŸŒŸ æ‹“å±•ï¼šä¼ä¸šä¸­æ—¥å¿—è®¾è®¡ç»éªŒ + é¢è¯•é—®é¢˜å‡†å¤‡</li></ul><ul id="2078d968-54a6-8024-8a96-dcdd54546d2c" class="bulleted-list"><li style="list-style-type:disc">ğŸ“Œ æ‰€æœ‰é…ç½®å«æ³¨é‡Šï¼ŒåŠ©ä½ æ„å»ºç¨³å¥ã€å¯è§‚æµ‹çš„ç³»ç»ŸåŸºç¡€è®¾æ–½</li></ul></blockquote><hr id="2078d968-54a6-8088-a006-c65c8b973ddc"/><h2 id="2078d968-54a6-8009-be3f-e49d3da7e799" class="">1. ä¸ºä»€ä¹ˆæ—¥å¿—ä¸ç›‘æ§å¾ˆé‡è¦ï¼Ÿ</h2><table id="2078d968-54a6-80f5-983a-cbcd93f8b4a0" class="simple-table"><tbody><tr id="2078d968-54a6-807c-bd93-fba0b81e5e12"><td id="bUIA" class="">é¡¹ç›®</td><td id="L^WJ" class="">ä½œç”¨</td></tr><tr id="2078d968-54a6-8062-ab63-ffc7fe91c315"><td id="bUIA" class="">æ—¥å¿—ç³»ç»Ÿ</td><td id="L^WJ" class="">è®°å½•ç³»ç»Ÿè¿è¡ŒçŠ¶æ€ã€è¿½è¸ª Bugã€è¾“å‡ºå®¡è®¡ä¿¡æ¯</td></tr><tr id="2078d968-54a6-80ca-8ecb-eaa7a7ed8de9"><td id="bUIA" class="">è¿è¡Œç›‘æ§</td><td id="L^WJ" class="">å®æ—¶è§‚å¯Ÿç³»ç»Ÿå¥åº·çŠ¶å†µã€èµ„æºå ç”¨ã€æœåŠ¡æ´»è·ƒåº¦</td></tr></tbody></table><p id="2078d968-54a6-80e4-bcf3-c12c80b0d11c" class="">ğŸ“Œ æ—¥å¿—æ˜¯åç«¯é¡¹ç›®ä¸­<strong>è°ƒè¯•ã€æµ‹è¯•ã€æ’é”™ã€è¿è¥ç›‘æ§</strong>ä¸å¯æˆ–ç¼ºçš„ä¸€ç¯ã€‚</p><hr id="2078d968-54a6-8011-b87e-c4eb224e94ab"/><h2 id="2078d968-54a6-809b-b9c2-de53ce37f459" class="">2. Spring Boot é»˜è®¤ä½¿ç”¨ Logbackï¼ˆæ—¥å¿—ç³»ç»Ÿï¼‰</h2><p id="2078d968-54a6-80b2-be5f-c1bce6139f4c" class="">Spring Boot é»˜è®¤å†…ç½® Logback æ—¥å¿—ç³»ç»Ÿï¼Œæ”¯æŒæ§åˆ¶å°è¾“å‡ºã€æ–‡ä»¶è¾“å‡ºã€å¤šçº§åˆ«è®¾ç½®ã€‚</p><hr id="2078d968-54a6-803f-ad74-dea31f4911f1"/><h2 id="2078d968-54a6-8046-b7df-eb2e1642f510" class="">3. æ—¥å¿—çº§åˆ«ä¸é»˜è®¤æ ¼å¼è¯´æ˜</h2><table id="2078d968-54a6-80a2-bbaf-c0eeeb3f7f18" class="simple-table"><tbody><tr id="2078d968-54a6-80e3-b16b-c94999b17040"><td id="fudc" class="">æ—¥å¿—çº§åˆ«</td><td id="AwVI" class="">è¯´æ˜</td><td id="LDUc" class="">ä½¿ç”¨åœºæ™¯</td></tr><tr id="2078d968-54a6-80b0-8cca-c1a82e12486a"><td id="fudc" class="">TRACE</td><td id="AwVI" class="">è¿½è¸ªï¼ˆæœ€è¯¦ç»†ï¼‰</td><td id="LDUc" class="">ä»…å¼€å‘è°ƒè¯•æ—¶ä½¿ç”¨</td></tr><tr id="2078d968-54a6-8038-850e-cf7dadfd8284"><td id="fudc" class="">DEBUG</td><td id="AwVI" class="">è°ƒè¯•ä¿¡æ¯</td><td id="LDUc" class="">è¾“å‡ºå˜é‡å€¼ç­‰ç»†èŠ‚</td></tr><tr id="2078d968-54a6-80d7-a1b9-c291e1b1d887"><td id="fudc" class="">INFO</td><td id="AwVI" class="">æ­£å¸¸è¿è¡Œæ¶ˆæ¯</td><td id="LDUc" class="">æ¨èä¸šåŠ¡æ—¥å¿—</td></tr><tr id="2078d968-54a6-8054-b9c2-e95636b72775"><td id="fudc" class="">WARN</td><td id="AwVI" class="">è­¦å‘Šä¿¡æ¯</td><td id="LDUc" class="">æ½œåœ¨é—®é¢˜æç¤º</td></tr><tr id="2078d968-54a6-8037-a587-f4879c7d80ba"><td id="fudc" class="">ERROR</td><td id="AwVI" class="">é”™è¯¯ä¿¡æ¯</td><td id="LDUc" class="">å¼‚å¸¸ã€ä¸¥é‡é”™è¯¯</td></tr></tbody></table><p id="2078d968-54a6-8090-b1fe-c596ec7cb250" class="">ğŸ“Œ é»˜è®¤åªè¾“å‡º <code>INFO</code> åŠä»¥ä¸Šçº§åˆ«æ—¥å¿—ã€‚</p><hr id="2078d968-54a6-80b3-a74a-d373f360df30"/><h2 id="2078d968-54a6-80d6-8cd1-d781e9f323dc" class="">4. é…ç½®æ—¥å¿—è¾“å‡ºè·¯å¾„ä¸çº§åˆ«</h2><p id="2078d968-54a6-8035-95e2-ea5d8d6bece2" class="">ç¼–è¾‘ <code>application.yml</code>ï¼š</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-807a-ac4e-dd99f3bcc521" class="code"><code class="language-YAML" style="white-space:pre-wrap;word-break:break-all">yaml

logging:
  level:
    root: info # å…¨å±€é»˜è®¤çº§åˆ«
    com.example.demo: debug # æŒ‡å®šåŒ…çº§åˆ«

  file:
    name: logs/app.log # æ–‡ä»¶åï¼ˆé»˜è®¤è·¯å¾„ä¸ºé¡¹ç›®ç›®å½•ï¼‰

</code></pre><p id="2078d968-54a6-8042-87cb-d2ac43057406" class="">âœ… æ—¥å¿—å°†åŒæ—¶è¾“å‡ºåˆ°æ§åˆ¶å° + æ–‡ä»¶ï¼ˆlogs/app.logï¼‰</p><hr id="2078d968-54a6-80ea-98fe-c8fef99b1e40"/><h2 id="2078d968-54a6-8083-aae1-fd84e4737684" class="">5. è‡ªå®šä¹‰æ—¥å¿—æ ¼å¼ï¼ˆlogback-spring.xmlï¼‰</h2><p id="2078d968-54a6-8074-80cc-f8c6a6fd0e49" class="">åœ¨ <code>resources/</code> ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶ï¼š</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-80d0-a8f9-c33c4f6ab4ed" class="code"><code class="language-XML" style="white-space:pre-wrap;word-break:break-all">xml

&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration&gt;

  &lt;property name=&quot;LOG_PATH&quot; value=&quot;logs&quot;/&gt;
  &lt;property name=&quot;FILE_NAME&quot; value=&quot;app&quot;/&gt;

  &lt;!-- æ§åˆ¶å°è¾“å‡º --&gt;
  &lt;appender name=&quot;Console&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;
    &lt;encoder&gt;
      &lt;pattern&gt;
        %d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
      &lt;/pattern&gt;
    &lt;/encoder&gt;
  &lt;/appender&gt;

  &lt;!-- æ–‡ä»¶è¾“å‡º --&gt;
  &lt;appender name=&quot;File&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;
    &lt;file&gt;${LOG_PATH}/${FILE_NAME}.log&lt;/file&gt;
    &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;
      &lt;fileNamePattern&gt;${LOG_PATH}/${FILE_NAME}.%d{yyyy-MM-dd}.log&lt;/fileNamePattern&gt;
      &lt;maxHistory&gt;7&lt;/maxHistory&gt; &lt;!-- ä¿ç•™æœ€è¿‘7å¤©æ—¥å¿— --&gt;
    &lt;/rollingPolicy&gt;
    &lt;encoder&gt;
      &lt;pattern&gt;
        %d{HH:mm:ss} %-5level [%thread] %logger{36} - %msg%n
      &lt;/pattern&gt;
    &lt;/encoder&gt;
  &lt;/appender&gt;

  &lt;!-- æ ¹æ—¥å¿—çº§åˆ«è®¾ç½® --&gt;
  &lt;root level=&quot;info&quot;&gt;
    &lt;appender-ref ref=&quot;Console&quot;/&gt;
    &lt;appender-ref ref=&quot;File&quot;/&gt;
  &lt;/root&gt;

&lt;/configuration&gt;

</code></pre><p id="2078d968-54a6-801f-a3b8-e2983f3b6fa4" class="">ğŸ“Œ æ–‡ä»¶åå¿…é¡»ä¸º <code>logback-spring.xml</code>ï¼Œå¦åˆ™ Spring Boot ä¸è‡ªåŠ¨åŠ è½½ã€‚</p><hr id="2078d968-54a6-8098-88be-db65c5fc8717"/><h2 id="2078d968-54a6-80b0-af22-da538289ca01" class="">6. ç¼–ç¨‹æ–¹å¼è¾“å‡ºæ—¥å¿—</h2><p id="2078d968-54a6-80e9-8ba4-fd7679590998" class="">åœ¨ä»»ä½•ç±»ä¸­éƒ½å¯ä½¿ç”¨ï¼š</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-803e-a15c-c2f5dcba7784" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

private static final Logger logger = LoggerFactory.getLogger(MyClass.class);

logger.info(&quot;æ­£å¸¸æ—¥å¿—ï¼šä¸šåŠ¡æ“ä½œæˆåŠŸ&quot;);
logger.warn(&quot;è­¦å‘Šæ—¥å¿—ï¼šæ•°æ®ä¸ä¸€è‡´&quot;);
logger.error(&quot;é”™è¯¯æ—¥å¿—ï¼šå‡ºç°å¼‚å¸¸&quot;, e);

</code></pre><p id="2078d968-54a6-8000-abe4-c2c7f265e8e9" class="">âœ… æ¨èåªä½¿ç”¨ <code>info/warn/error</code> ä¸‰ç§çº§åˆ«ã€‚</p><hr id="2078d968-54a6-804d-aa62-f24e6a58781f"/><h2 id="2078d968-54a6-809a-bd69-f97f2c6d61c9" class="">ğŸ“¦ 7. é¡¹ç›®è¿è¡ŒçŠ¶æ€ç›‘æ§ï¼šActuator</h2><hr id="2078d968-54a6-805a-9ff0-c965d96113cd"/><h3 id="2078d968-54a6-80cf-a63e-f15c2ef041b4" class="">âœ… å¼•å…¥ä¾èµ–</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-800e-a30f-ca3402cc32bc" class="code"><code class="language-XML" style="white-space:pre-wrap;word-break:break-all">xml

&lt;dependency&gt;
  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
  &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
&lt;/dependency&gt;

</code></pre><hr id="2078d968-54a6-802b-8fee-c50802131b93"/><h3 id="2078d968-54a6-805f-8902-cb54a19a9667" class="">âœ… é…ç½®å¼€å¯å“ªäº›ç›‘æ§ç«¯ç‚¹ï¼š</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8056-aefd-dd8ce7016f88" class="code"><code class="language-YAML" style="white-space:pre-wrap;word-break:break-all">
yaml
agement:
  endpoints:
    web:
      exposure:
        include: health, info, metrics, env

  endpoint:
    health:
      show-details: always

</code></pre><hr id="2078d968-54a6-80d1-84a4-eaeae84f5408"/><h3 id="2078d968-54a6-805b-bcfd-ece93bafeaa4" class="">ğŸ“Œ å¯ç”¨æ¥å£ç¤ºä¾‹ï¼š</h3><table id="2078d968-54a6-80a0-9480-d286330b5327" class="simple-table"><tbody><tr id="2078d968-54a6-8076-a66d-ec68b634e086"><td id="y|~m" class="">åœ°å€</td><td id="LDXg" class="">åŠŸèƒ½è¯´æ˜</td></tr><tr id="2078d968-54a6-80e0-adda-df5620aa7b24"><td id="y|~m" class=""><code>/actuator/health</code></td><td id="LDXg" class="">ç³»ç»Ÿå¥åº·æ£€æŸ¥ï¼ˆå¯é…ç½®ç»†èŠ‚ï¼‰</td></tr><tr id="2078d968-54a6-807c-9845-ccec998829b3"><td id="y|~m" class=""><code>/actuator/info</code></td><td id="LDXg" class="">é¡¹ç›®ç‰ˆæœ¬ã€æè¿°ç­‰</td></tr><tr id="2078d968-54a6-804d-a85d-db181250b77d"><td id="y|~m" class=""><code>/actuator/metrics</code></td><td id="LDXg" class="">æŸ¥çœ‹ JVMã€å†…å­˜ã€è¯·æ±‚ç­‰æŒ‡æ ‡</td></tr><tr id="2078d968-54a6-80aa-a132-f627db49d6cd"><td id="y|~m" class=""><code>/actuator/env</code></td><td id="LDXg" class="">æŸ¥çœ‹å½“å‰ç¯å¢ƒå˜é‡</td></tr></tbody></table><hr id="2078d968-54a6-808a-9c17-d4415f772806"/><h3 id="2078d968-54a6-808f-b18f-c6c0b66bd4f9" class="">âœ… ç¤ºä¾‹ info é…ç½®ï¼ˆæ˜¾ç¤ºé¡¹ç›®ä¿¡æ¯ï¼‰</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-80f7-9828-e1242f240c6f" class="code"><code class="language-YAML" style="white-space:pre-wrap;word-break:break-all">yaml

info:
  app:
    name: SpringBootç¤ºä¾‹
    version: 1.0.0

</code></pre><p id="2078d968-54a6-80d0-aee3-d7958c918911" class="">è¾“å‡ºç»“æœï¼š</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-805e-8a3d-c9874d60957b" class="code"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">json

{
  &quot;app&quot;: {
    &quot;name&quot;: &quot;SpringBootç¤ºä¾‹&quot;,
    &quot;version&quot;: &quot;1.0.0&quot;
  }
}

</code></pre><hr id="2078d968-54a6-805c-a79c-f64e82a48d9d"/><h2 id="2078d968-54a6-80d2-ba39-f5476c632834" class="">ğŸ§  é¢è¯•å¼ºåŒ–é—®é¢˜</h2><hr id="2078d968-54a6-807a-becf-fe0a32aa311f"/><h3 id="2078d968-54a6-80c2-89f7-ddec29d4bc2c" class="">â“ Q1ï¼šå¦‚ä½•é…ç½®æ—¥å¿—ç³»ç»Ÿä½¿å…¶ä¾¿äºç”Ÿäº§æ’æŸ¥ï¼Ÿ</h3><p id="2078d968-54a6-806f-8daa-d8908f34d9bd" class="">âœ… å›ç­”è¦ç‚¹ï¼š</p><blockquote id="2078d968-54a6-8094-84ea-c0fa09d89b9a" class="">è®¾ç½®åˆç†çš„æ—¥å¿—çº§åˆ«ï¼ˆé»˜è®¤ infoï¼‰æ§åˆ¶å° + æ–‡ä»¶åŒæ—¶è¾“å‡ºä¿ç•™ 7~14 å¤©æ»šåŠ¨æ—¥å¿—å…³é”®æ“ä½œæ‰“æ—¥å¿—ï¼ˆç™»å½•ã€ä¸‹å•ã€å¼‚å¸¸ç­‰ï¼‰</blockquote><hr id="2078d968-54a6-80e4-a573-f7061b00f0a3"/><h3 id="2078d968-54a6-80f7-bbaa-f5cf1dce7324" class="">â“ Q2ï¼šSpring Boot Actuator æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h3><p id="2078d968-54a6-8066-9848-c03f2ce9c581" class="">âœ… å›ç­”è¦ç‚¹ï¼š</p><blockquote id="2078d968-54a6-808f-9628-f442c4f46cfc" class="">å®ƒæä¾›äº†ä¸€ç»„é¢„è®¾çš„ç›‘æ§æ¥å£ï¼Œå¯æŸ¥çœ‹æœåŠ¡å¥åº·ã€ç¯å¢ƒå˜é‡ã€è¿è¡ŒæŒ‡æ ‡ï¼Œä¾¿äºç³»ç»Ÿè‡ªåŠ¨åŒ–ç›‘æ§ä¸è¿ç»´ï¼ˆå¦‚ Prometheusã€Kibana é…åˆä½¿ç”¨ï¼‰ã€‚</blockquote><hr id="2078d968-54a6-80c5-a02f-c32a38772d6a"/><h3 id="2078d968-54a6-8043-8f01-ebc7cf8e130a" class="">â“ Q3ï¼šç”Ÿäº§ç¯å¢ƒä¸­å¦‚ä½•æ§åˆ¶æ—¥å¿—å¤§å°ï¼Ÿ</h3><p id="2078d968-54a6-807f-94f8-e56cf5e8ae11" class="">âœ… å›ç­”è¦ç‚¹ï¼š</p><blockquote id="2078d968-54a6-8080-b9f2-ca4997b98b66" class="">ä½¿ç”¨ Logback çš„ RollingFileAppender ç­–ç•¥ï¼Œè®¾ç½®æ¯æ—¥æ»šåŠ¨æˆ–å¤§å°æ»šåŠ¨ï¼Œå¹¶é™å®šæœ€å¤§ä¿ç•™å¤©æ•°ï¼ˆå¦‚ maxHistory=7ï¼‰ã€‚</blockquote><hr id="2078d968-54a6-806d-9f30-de018511f9e4"/><h2 id="2078d968-54a6-80ba-a885-e4e13c5991f1" class="">ğŸ“š å°ç»“å›é¡¾</h2><table id="2078d968-54a6-8040-a70a-c58ec654bbc4" class="simple-table"><tbody><tr id="2078d968-54a6-8055-9eae-cf1a19c0ee3b"><td id="Pnyb" class="">çŸ¥è¯†ç‚¹</td><td id="VPOU" class="">å†…å®¹è¯´æ˜</td></tr><tr id="2078d968-54a6-8076-acb0-e77bb2f98918"><td id="Pnyb" class="">æ—¥å¿—çº§åˆ«</td><td id="VPOU" class="">info/warn/error å¸¸ç”¨</td></tr><tr id="2078d968-54a6-8005-8727-c3f93877b2eb"><td id="Pnyb" class="">æ—¥å¿—é…ç½®æ–¹å¼</td><td id="VPOU" class=""><code>application.yml</code> or <code>logback-spring.xml</code></td></tr><tr id="2078d968-54a6-80a5-a463-d8d904e956db"><td id="Pnyb" class="">æ–‡ä»¶è¾“å‡ºç­–ç•¥</td><td id="VPOU" class="">æ—¶é—´æ»šåŠ¨ã€å¤§å°æ»šåŠ¨ã€ä¿ç•™å¤©æ•°</td></tr><tr id="2078d968-54a6-806a-8871-f98a2b491420"><td id="Pnyb" class="">Spring Boot Actuator</td><td id="VPOU" class="">å¯ç”¨åè‡ªåŠ¨æš´éœ²æœåŠ¡è¿è¡ŒçŠ¶æ€æ¥å£</td></tr><tr id="2078d968-54a6-80a3-9720-f372664ef169"><td id="Pnyb" class="">å¸¸ç”¨ç«¯ç‚¹</td><td id="VPOU" class=""><code>/health</code>, <code>/info</code>, <code>/metrics</code>, <code>/env</code></td></tr><tr id="2078d968-54a6-80af-9c41-fffb5304106e"><td id="Pnyb" class="">å®æˆ˜å»ºè®®</td><td id="VPOU" class="">æ—¥å¿—å’Œç›‘æ§å¿…é¡»è½åœ°ï¼Œè¿ç»´å‰æ</td></tr></tbody></table><p id="2078d968-54a6-8043-9acb-f392e6b3c26d" class="">
</p><p id="2078d968-54a6-8091-8494-cbf6d67e391e" class="">
</p><p id="2078d968-54a6-803d-991c-de9b2faae958" class="">
</p><p id="2078d968-54a6-8031-816f-e7cb2d8cdd6e" class="">
</p><p id="2078d968-54a6-8081-8793-dfa76161ed75" class="">
</p><p id="2078d968-54a6-80f8-8763-fffce77af5ef" class="">
</p><h1 id="s13" class="">ç¬¬13ç« ï¼šæ–‡ä»¶ä¸Šä¼ ä¸ä¸‹è½½æ¥å£å®ç°ï¼ˆå«å›¾ç‰‡/æ–‡æ¡£/å¤´åƒå¤„ç†ï¼‰</h1><blockquote id="2078d968-54a6-804a-b02c-e4c969286b22" class="">âœ… æœ¬ç« ç›®æ ‡ï¼š<ul id="2078d968-54a6-80f3-99df-e628ee6252a3" class="bulleted-list"><li style="list-style-type:disc">å®ç°å•ä¸ª/å¤šä¸ªæ–‡ä»¶ä¸Šä¼ æ¥å£</li></ul><ul id="2078d968-54a6-807c-bc54-cb1310ce9981" class="bulleted-list"><li style="list-style-type:disc">æ”¯æŒä¸Šä¼ å›¾ç‰‡ã€PDFã€Excel ç­‰æ ¼å¼</li></ul><ul id="2078d968-54a6-807f-bbdc-d610a3ef725a" class="bulleted-list"><li style="list-style-type:disc">å®ç°æ–‡ä»¶ä¸‹è½½æ¥å£ï¼Œæ”¯æŒå‰ç«¯ç‚¹å‡»ä¿å­˜</li></ul><ul id="2078d968-54a6-8090-b642-c48ebf70d5fd" class="bulleted-list"><li style="list-style-type:disc">å®ç°æ–‡ä»¶ä¿å­˜åˆ°æœ¬åœ°ç£ç›˜æˆ–æœåŠ¡å™¨ç›®å½•</li></ul><ul id="2078d968-54a6-8046-8b24-e755eec3f330" class="bulleted-list"><li style="list-style-type:disc">ğŸŒŸ æ‹“å±•ï¼šæ¥å£å®‰å…¨ã€é˜²æ­¢æ–‡ä»¶æ”»å‡» + é¢è¯•é¢˜</li></ul><ul id="2078d968-54a6-8038-ab37-c590e12a3011" class="bulleted-list"><li style="list-style-type:disc">ğŸ“Œ æ‰€æœ‰ä»£ç é…æ³¨é‡Šï¼Œå«ä¸Šä¼ éªŒè¯é€»è¾‘ä¸å¼‚å¸¸å¤„ç†</li></ul></blockquote><hr id="2078d968-54a6-802c-ba18-ccc87b4fd417"/><h2 id="2078d968-54a6-8068-a102-ed9ce7263962" class="">1. æ–‡ä»¶ä¸Šä¼ çš„åŸºæœ¬æµç¨‹ï¼ˆMultipartï¼‰</h2><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-800a-9ef7-f69dabda1484" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">

å‰ç«¯é€‰æ‹©æ–‡ä»¶ â†’ æ„å»º Multipart è¡¨å•è¯·æ±‚ â†’ åç«¯ä½¿ç”¨ @RequestParam MultipartFile æ¥æ”¶ â†’ ä¿å­˜æ–‡ä»¶

</code></pre><p id="2078d968-54a6-80ca-a0af-d9bf7762545b" class="">Spring Boot åŸç”Ÿæ”¯æŒ <code>multipart/form-data</code> æ–‡ä»¶ä¸Šä¼ æ ¼å¼ã€‚</p><hr id="2078d968-54a6-8019-8b3f-f243661f589c"/><h2 id="2078d968-54a6-80e1-838e-eaf5c7222c4e" class="">2. å¼€å¯æ–‡ä»¶ä¸Šä¼ æ”¯æŒï¼ˆé»˜è®¤å·²å¼€å¯ï¼‰</h2><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-80c8-9787-e6e743bff9b6" class="code"><code class="language-YAML" style="white-space:pre-wrap;word-break:break-all">yaml

spring:
  servlet:
    multipart:
      enabled: true
      max-file-size: 10MB
      max-request-size: 20MB

</code></pre><p id="2078d968-54a6-8081-a482-c66c80973938" class="">ğŸ“Œ <code>max-file-size</code> æ˜¯å•ä¸ªæ–‡ä»¶é™åˆ¶ï¼Œ<code>max-request-size</code> æ˜¯æ‰€æœ‰æ–‡ä»¶åˆå¹¶å¤§å°ã€‚</p><hr id="2078d968-54a6-80af-8fcd-ee5278d751f9"/><h2 id="2078d968-54a6-8026-8934-c566b91bafde" class="">3. å®ç°æ–‡ä»¶ä¸Šä¼ æ¥å£ï¼ˆæ”¯æŒä¿å­˜æœ¬åœ°ï¼‰</h2><hr id="2078d968-54a6-80d3-b3a1-c4fa7c1cc1e5"/><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8082-878f-ddf68c5c1bc8" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

@RestController
@RequestMapping(&quot;/file&quot;)
public class FileController {

    // ä¸Šä¼ ç›®å½•ï¼ˆå¯å†™æ­»ï¼Œä¹Ÿå¯é€šè¿‡é…ç½®æ³¨å…¥ï¼‰
    private static final String UPLOAD_DIR = &quot;uploads/&quot;;

    @PostMapping(&quot;/upload&quot;)
    public Result&lt;?&gt; upload(@RequestParam(&quot;file&quot;) MultipartFile file) {
        // åˆ¤æ–­æ–‡ä»¶æ˜¯å¦ä¸ºç©º
        if (file.isEmpty()) {
            return Result.error(&quot;ä¸Šä¼ æ–‡ä»¶ä¸èƒ½ä¸ºç©º&quot;);
        }

        // è·å–åŸå§‹æ–‡ä»¶å
        String fileName = file.getOriginalFilename();

        // è®¾ç½®ä¿å­˜è·¯å¾„ï¼ˆå½“å‰é¡¹ç›®ä¸‹ï¼‰
        File dest = new File(UPLOAD_DIR + fileName);

        try {
            file.transferTo(dest); // ä¿å­˜æ–‡ä»¶åˆ°æŒ‡å®šè·¯å¾„
            return Result.success(&quot;ä¸Šä¼ æˆåŠŸï¼Œæ–‡ä»¶åï¼š&quot; + fileName);
        } catch (IOException e) {
            return Result.error(&quot;ä¸Šä¼ å¤±è´¥ï¼š&quot; + e.getMessage());
        }
    }
}

</code></pre><p id="2078d968-54a6-80ee-ad7c-d60ca0b43ab9" class="">âœ… æ¥å£æµ‹è¯•ï¼š</p><ul id="2078d968-54a6-801e-9be2-c40185b0c3bf" class="bulleted-list"><li style="list-style-type:disc">ä½¿ç”¨ Postman è®¾ç½® <code>form-data</code></li></ul><ul id="2078d968-54a6-80b8-a86a-fc04ac841b7a" class="bulleted-list"><li style="list-style-type:disc">key ä¸º <code>file</code>ï¼Œvalue é€‰æ‹©ä»»æ„æ–‡ä»¶</li></ul><hr id="2078d968-54a6-8084-84bd-f19ede646fe1"/><h2 id="2078d968-54a6-805d-a2d4-eec83c59bbd7" class="">4. å®ç°æ–‡ä»¶ä¸‹è½½æ¥å£ï¼ˆæ”¯æŒå‰ç«¯ä¿å­˜ï¼‰</h2><hr id="2078d968-54a6-8023-ab45-e2285228fd84"/><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-80a1-9b11-ecff61d8cff7" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

@GetMapping(&quot;/download&quot;)
public void download(@RequestParam String filename, HttpServletResponse response) {
    File file = new File(UPLOAD_DIR + filename);

    if (!file.exists()) {
        response.setStatus(HttpServletResponse.SC_NOT_FOUND);
        return;
    }

    // è®¾ç½®å“åº”å¤´
    response.setContentType(&quot;application/octet-stream&quot;);
    response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + filename);

    try (InputStream in = new FileInputStream(file);
         OutputStream out = response.getOutputStream()) {

        byte[] buffer = new byte[1024];
        int len;

        while ((len = in.read(buffer)) != -1) {
            out.write(buffer, 0, len);
        }

    } catch (IOException e) {
        e.printStackTrace();
    }
}

</code></pre><p id="2078d968-54a6-8022-a287-e0a16d8c6d26" class="">ğŸ“Œ å‰ç«¯ç‚¹å‡»é“¾æ¥ï¼š</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-80b4-bb09-cb48ee3ce038" class="code"><code class="language-HTML" style="white-space:pre-wrap;word-break:break-all">html

&lt;a href=&quot;/file/download?filename=example.jpg&quot; download&gt;ä¸‹è½½æ–‡ä»¶&lt;/a&gt;

5. å®‰å…¨æ€§å»ºè®®ï¼ˆé˜²æ­¢è·¯å¾„ç©¿è¶Šç­‰æ”»å‡»ï¼‰</code></pre><hr id="2078d968-54a6-8039-b441-fb6104dcc48a"/><p id="2078d968-54a6-804f-b2ec-c0c04c4f5194" class="">âœ… æ ¡éªŒæ–‡ä»¶ååˆæ³•æ€§ï¼š</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-805b-bcd0-ef806df400cb" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

if (filename.contains(&quot;..&quot;)) {
    throw new RuntimeException(&quot;éæ³•è·¯å¾„å&quot;);
}

</code></pre><p id="2078d968-54a6-80e6-bf11-f290af04e6c0" class="">âœ… é™åˆ¶ä¸Šä¼ ç±»å‹ï¼ˆé€šè¿‡åç¼€ï¼‰ï¼š</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-8093-9dad-d392e4a93d4c" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

if (!fileName.endsWith(&quot;.jpg&quot;) &amp;&amp; !fileName.endsWith(&quot;.png&quot;)) {
    return Result.error(&quot;ä»…æ”¯æŒ JPG/PNG æ ¼å¼&quot;);
}

</code></pre><p id="2078d968-54a6-80ba-94f3-f19b85c79941" class="">âœ… ä¸Šä¼ æ–‡ä»¶åé˜²é‡å¤ï¼š</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-809e-9cce-eb9120192695" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

String uniqueName = UUID.randomUUID() + &quot;_&quot; + fileName;

</code></pre><hr id="2078d968-54a6-80e9-9ce3-f617475d3760"/><h2 id="2078d968-54a6-8060-b6ee-dcd76827136b" class="">6. å¤šæ–‡ä»¶ä¸Šä¼ ç¤ºä¾‹ï¼ˆå¤šä¸ªå›¾ç‰‡/æ–‡æ¡£ï¼‰</h2><hr id="2078d968-54a6-8066-bbc9-fcf5ff987f9c"/><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2078d968-54a6-80fc-aa38-eb63d31eab51" class="code"><code class="language-Java" style="white-space:pre-wrap;word-break:break-all">java

@PostMapping(&quot;/upload-multiple&quot;)
public Result&lt;?&gt; uploadMultiple(@RequestParam(&quot;files&quot;) MultipartFile[] files) {
    List&lt;String&gt; uploaded = new ArrayList&lt;&gt;();

    for (MultipartFile file : files) {
        if (!file.isEmpty()) {
            String fileName = file.getOriginalFilename();
            try {
                file.transferTo(new File(UPLOAD_DIR + fileName));
                uploaded.add(fileName);
            } catch (IOException e) {
                return Result.error(&quot;éƒ¨åˆ†ä¸Šä¼ å¤±è´¥ï¼š&quot; + fileName);
            }
        }
    }

    return Result.success(&quot;ä¸Šä¼ æˆåŠŸï¼š&quot; + uploaded);
}

</code></pre><hr id="2078d968-54a6-809d-887c-ec6eff2b61a0"/><h2 id="2078d968-54a6-807a-9042-c98d524b58db" class="">ğŸ§  é¢è¯•å¼ºåŒ–é—®é¢˜</h2><hr id="2078d968-54a6-80a6-a149-d06e940c4fc3"/><h3 id="2078d968-54a6-8014-be82-da1eb52917f5" class="">â“ Q1ï¼šSpring Boot æ˜¯å¦‚ä½•æ¥æ”¶ä¸Šä¼ æ–‡ä»¶çš„ï¼Ÿ</h3><p id="2078d968-54a6-8021-8246-e00cd4d967ea" class="">âœ… å›ç­”è¦ç‚¹ï¼š</p><blockquote id="2078d968-54a6-80b9-9535-e0fc06e2f8b2" class="">Spring Boot åŸºäº MultipartResolver è‡ªåŠ¨è¯†åˆ«ä¸Šä¼ ç±»å‹ï¼Œä½¿ç”¨ @RequestParam MultipartFile file æ³¨å…¥ä¸Šä¼ æ–‡ä»¶ï¼Œåº•å±‚é€šè¿‡ CommonsMultipartResolver å®ç°ã€‚</blockquote><hr id="2078d968-54a6-8084-ae8f-c2216960247e"/><h3 id="2078d968-54a6-80bf-a82c-d394a767095c" class="">â“ Q2ï¼šå¦‚ä½•é˜²æ­¢ç”¨æˆ·ä¸Šä¼ éæ³•æ–‡ä»¶å¯¼è‡´æœåŠ¡å™¨æ”»å‡»ï¼Ÿ</h3><p id="2078d968-54a6-805f-8dbf-fab06aaf9969" class="">âœ… æ‹“å±•å»ºè®®ï¼š</p><blockquote id="2078d968-54a6-804e-886b-c05c8d2d817d" class="">é™åˆ¶æ–‡ä»¶å¤§å°ï¼ˆé…ç½®ï¼‰æ ¡éªŒæ–‡ä»¶æ‰©å±•åï¼ˆç™½åå•ï¼‰é˜²æ­¢æ–‡ä»¶åè·¯å¾„ç©¿è¶Šæ”»å‡»ï¼ˆæ ¡éªŒ ../ï¼‰ä½¿ç”¨ UUID é‡å‘½åä¸Šä¼ æ–‡ä»¶ï¼Œé¿å…è¦†ç›–åŸæœ‰æ–‡ä»¶</blockquote><hr id="2078d968-54a6-8047-9d82-ead9e58e9b43"/><h3 id="2078d968-54a6-803e-b518-f41243ca9b12" class="">â“ Q3ï¼šæ–‡ä»¶ä¸Šä¼ æ—¶å¦‚ä½•ä¿å­˜åˆ°å¯¹è±¡å­˜å‚¨ï¼ˆå¦‚é˜¿é‡Œ OSSï¼‰ï¼Ÿ</h3><p id="2078d968-54a6-80b5-87ae-c0addea31a09" class="">âœ… å›ç­”è¦ç‚¹ï¼š</p><blockquote id="2078d968-54a6-80be-9152-ed0dd9d56d56" class="">ä¸Šä¼ æ–‡ä»¶åä¸ä¿å­˜åœ¨æœ¬åœ°ç£ç›˜ï¼Œè€Œæ˜¯é€šè¿‡ SDK è°ƒç”¨é˜¿é‡Œäº‘ OSSã€è…¾è®¯ COS æˆ– AWS S3 æ¥å£ä¸Šä¼ å­—èŠ‚æµï¼Œæå‡å¯æ‰©å±•æ€§ä¸å®‰å…¨æ€§ã€‚</blockquote><hr id="2078d968-54a6-80e7-adc7-da5efd5fb2a8"/><h2 id="2078d968-54a6-805f-8181-f0434396c32e" class="">ğŸ“š å°ç»“å›é¡¾</h2><table id="2078d968-54a6-8033-93c6-ee8a680c361c" class="simple-table"><tbody><tr id="2078d968-54a6-804a-a16f-de1258e9964c"><td id="@&lt;]=" class="">åŠŸèƒ½ç‚¹</td><td id="RCKU" class="">è¯´æ˜</td></tr><tr id="2078d968-54a6-80ad-9b9c-f6816288596a"><td id="@&lt;]=" class="">å•æ–‡ä»¶ä¸Šä¼ </td><td id="RCKU" class="">ä½¿ç”¨ <code>MultipartFile file</code> æ¥æ”¶</td></tr><tr id="2078d968-54a6-804c-8abb-ff8595044083"><td id="@&lt;]=" class="">å¤šæ–‡ä»¶ä¸Šä¼ </td><td id="RCKU" class="">ä½¿ç”¨ <code>MultipartFile[] files</code> æ¥æ”¶</td></tr><tr id="2078d968-54a6-80dd-aafe-f53c29b147dd"><td id="@&lt;]=" class="">æ–‡ä»¶ä¿å­˜ä½ç½®</td><td id="RCKU" class="">æœ¬åœ°ç£ç›˜æˆ–è¿œç¨‹å¯¹è±¡å­˜å‚¨</td></tr><tr id="2078d968-54a6-80ef-ade6-ed3f79be79bc"><td id="@&lt;]=" class="">æ–‡ä»¶ä¸‹è½½æ¥å£</td><td id="RCKU" class="">é€šè¿‡ <code>HttpServletResponse</code> å®ç°</td></tr><tr id="2078d968-54a6-8054-a8d0-ceb28c62bb73"><td id="@&lt;]=" class="">å®‰å…¨å»ºè®®</td><td id="RCKU" class="">é˜²è·¯å¾„ç©¿è¶Šã€ç±»å‹æ ¡éªŒã€å¤§å°é™åˆ¶</td></tr></tbody></table></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body></html>