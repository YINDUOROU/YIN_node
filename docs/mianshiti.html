<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>前端面试 PDF 题库在线浏览</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        h2 { margin-bottom: 10px; text-align: center; }
        input[type="text"] { width: 100%; padding: 10px; margin-bottom: 20px; border-radius: 6px; border: 1px solid #ccc; }
        .button-container { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
        .btn-group { display: flex; margin-bottom: 10px; }
        button {
            min-width: 140px;
            padding: 10px;
            font-size: 14px;
            cursor: pointer;
            border: none;
            border-radius: 6px;
            box-sizing: border-box;
            margin-right: 5px;
            transition: background 0.2s;
        }
        .preview-btn { background: #1976d2; color: #fff; }
        .preview-btn.active { background: #1565c0; }
        .download-btn { background: #388e3c; color: #fff; }
        #viewer { display: none; margin-top: 30px; }
        iframe { width: 100%; height: 90vh; border: none; }
        @media (max-width: 600px) {
            button { min-width: 80px; font-size: 12px; padding: 8px; }
            h2 { font-size: 20px; }
            .btn-group { flex-direction: column; }
        }
    </style>
</head>
<body>
    <h2>前端面试 PDF 题库在线浏览</h2>
    <input type="text" id="searchBox" placeholder="输入关键字过滤文档..." onkeyup="filterButtons()">
    <div class="button-container" id="buttonContainer"></div>
    <div id="viewer">
        <iframe id="pdfFrame"></iframe>
    </div>
    <script>
        const fileList = [
            "1.JavaScript面试真题-210页.pdf",
            "2.ES6面试真题-84页.pdf",
            "3.Vue面试真题-237页.pdf",
            "4.React面试真题-156页.pdf",
            "5.Node.js面试真题-71页.pdf",
            "6.小程序面试真题-37页.pdf",
            "7.HTTP面试真题-62页.pdf",
            "8.Typescript面试真题-62页.pdf",
            "9.Webpack面试真题-59页.pdf",
            "10.算法面试真题-82页.pdf",
            "11.设计模式面试真题-31页.pdf",
            "12.CSS面试真题-127页.pdf"
        ];

        const rawPrefix = "https://raw.githubusercontent.com/yinduorou/YIN_node/main/Wteachermemo/";

        const buttonContainer = document.getElementById("buttonContainer");
        const viewer = document.getElementById("viewer");
        const iframe = document.getElementById("pdfFrame");

        // 生成每组按钮（预览+下载）
        fileList.forEach(fileName => {
            const btnGroup = document.createElement("div");
            btnGroup.className = "btn-group";

            // 预览按钮
            const previewBtn = document.createElement("button");
            previewBtn.textContent = "预览：" + fileName.replace(".pdf", "");
            previewBtn.className = "preview-btn";
            previewBtn.onclick = () => showPDF(previewBtn, fileName);

            // 下载按钮
            const downloadBtn = document.createElement("button");
            downloadBtn.textContent = "⬇️下载";
            downloadBtn.className = "download-btn";
            downloadBtn.onclick = () => {
                const fullLink = rawPrefix + encodeURIComponent(fileName);
                // 用a标签下载方式避免新窗口阻止，兼容性最佳
                const a = document.createElement("a");
                a.href = fullLink;
                a.download = fileName;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            };

            btnGroup.appendChild(previewBtn);
            btnGroup.appendChild(downloadBtn);
            buttonContainer.appendChild(btnGroup);
        });

        function showPDF(button, fileName) {
            // 移除所有激活态
            document.querySelectorAll(".preview-btn").forEach(b => b.classList.remove("active"));
            button.classList.add("active");
            const fullLink = rawPrefix + encodeURIComponent(fileName);
            // 用Google Docs Viewer预览
            iframe.src = "https://docs.google.com/gview?url=" + encodeURIComponent(fullLink) + "&embedded=true";
            viewer.style.display = "block";
            viewer.scrollIntoView({ behavior: 'smooth' });
        }

        function filterButtons() {
            const keyword = document.getElementById("searchBox").value.toLowerCase();
            document.querySelectorAll(".btn-group").forEach(group => {
                const text = group.firstChild.textContent.toLowerCase();
                group.style.display = text.includes(keyword) ? "flex" : "none";
            });
        }
    </script>
</body>
</html>
